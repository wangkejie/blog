<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="msvalidate.01" content="9BDlx6FiNE">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wangkejie.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="书山有路勤为径，学海无涯苦作舟！">
<meta property="og:type" content="website">
<meta property="og:title" content="王科杰">
<meta property="og:url" content="https://wangkejie.com/page/7/index.html">
<meta property="og:site_name" content="王科杰">
<meta property="og:description" content="书山有路勤为径，学海无涯苦作舟！">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Jack Wang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://wangkejie.com/page/7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>王科杰 - Jack's Notes</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?93e26277de0cf2c5851167f2c6dcaa7d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">王科杰</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Jack's Notes</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档<span class="badge">70</span></a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/me/" rel="section"><i class="user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签<span class="badge">78</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类<span class="badge">70</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL29yZ3Mvd2FuZ2tlamllL3JlcG9zaXRvcmllcw==" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangkejie.com/iOS/questions/resolved.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王科杰">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/iOS/questions/resolved.html" class="post-title-link" itemprop="url">iOS解决过的问题汇总</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-07-10 12:24:27" itemprop="dateCreated datePublished" datetime="2017-07-10T12:24:27+08:00">2017-07-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/iOS%E8%A7%A3%E5%86%B3%E8%BF%87%E7%9A%84%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/" itemprop="url" rel="index"><span itemprop="name">iOS解决过的问题汇总</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/iOS/questions/resolved.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/iOS/questions/resolved.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="关于断点-objc-exception-throw-问题分析"><a href="#关于断点-objc-exception-throw-问题分析" class="headerlink" title="关于断点 objc_exception_throw 问题分析"></a>关于断点 objc_exception_throw 问题分析</h1><p>通过<code>bt</code>打印出堆栈信息<br>例如：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">thread #<span class="number">1</span>, queue = <span class="string">&#x27;com.apple.main-thread&#x27;</span>, stop reason = breakpoint <span class="number">2.3</span></span><br><span class="line">    frame #<span class="number">0</span>: <span class="number">0x00000002232679c0</span> libobjc.A.dylib`objc_exception_throw</span><br><span class="line">    frame #<span class="number">1</span>: <span class="number">0x0000000223fabe10</span> CoreFoundation`-[<span class="built_in">NSException</span> raise] + <span class="number">12</span></span><br><span class="line">    frame #<span class="number">2</span>: <span class="number">0x0000000224a778fc</span> Foundation`-[<span class="built_in">NSObject</span>(<span class="built_in">NSKeyValueCoding</span>) valueForUndefinedKey:] + <span class="number">248</span></span><br><span class="line">    frame #<span class="number">3</span>: <span class="number">0x00000002249ebe1c</span> Foundation`-[<span class="built_in">NSObject</span>(<span class="built_in">NSKeyValueCoding</span>) valueForKey:] + <span class="number">260</span></span><br><span class="line">    frame #<span class="number">4</span>: <span class="number">0x0000000224a091a4</span> Foundation`-[<span class="built_in">NSObject</span>(<span class="built_in">NSKeyValueCoding</span>) setValue:forKeyPath:] + <span class="number">256</span></span><br><span class="line">    frame #<span class="number">5</span>: <span class="number">0x00000002507d45ac</span> <span class="built_in">UIKitCore</span>`-[<span class="built_in">UINibKeyValuePair</span> apply] + <span class="number">72</span></span><br><span class="line">    frame #<span class="number">6</span>: <span class="number">0x0000000223f7be88</span> CoreFoundation`-[<span class="built_in">NSArray</span> makeObjectsPerformSelector:] + <span class="number">280</span></span><br><span class="line">    frame #<span class="number">7</span>: <span class="number">0x00000002507d3fec</span> <span class="built_in">UIKitCore</span>`-[<span class="built_in">UINib</span> instantiateWithOwner:options:] + <span class="number">1628</span></span><br><span class="line">    frame #<span class="number">8</span>: <span class="number">0x0000000250d1ef84</span> <span class="built_in">UIKitCore</span>`-[<span class="built_in">UITableView</span> _dequeueReusableViewOfType:withIdentifier:] + <span class="number">592</span></span><br><span class="line">    frame #<span class="number">9</span>: <span class="number">0x000000010351f838</span> Gundam`-[<span class="built_in">UITableView</span>(TestinUITableView) testin_DequeueReusableCellWithIdentifier:] + <span class="number">112</span></span><br><span class="line">    frame #<span class="number">10</span>: <span class="number">0x0000000250d1f42c</span> <span class="built_in">UIKitCore</span>`-[<span class="built_in">UITableView</span> _dequeueReusableCellWithIdentifier:forIndexPath:usingPresentationValues:] + <span class="number">164</span></span><br><span class="line">    frame #<span class="number">11</span>: <span class="number">0x0000000250d1f358</span> <span class="built_in">UIKitCore</span>`-[<span class="built_in">UITableView</span> dequeueReusableCellWithIdentifier:forIndexPath:] + <span class="number">96</span></span><br><span class="line">    frame #<span class="number">12</span>: <span class="number">0x000000010351f9b8</span> Gundam`-[<span class="built_in">UITableView</span>(TestinUITableView) testin_DequeueReusableCellWithIdentifier:forIndexPath:] + <span class="number">292</span></span><br><span class="line">  * frame #<span class="number">13</span>: <span class="number">0x000000010267cfe8</span> Gundam`-[DKLandlordEntrustViewController tableView:cellForRowAtIndexPath:](<span class="keyword">self</span>=<span class="number">0x0000000155b0aa00</span>, _cmd=<span class="string">&quot;tableView:cellForRowAtIndexPath:&quot;</span>, tableView=<span class="number">0x000000015495fa00</span>, indexPath=<span class="number">0xb59300120e671f5c</span>) at DKLandlordEntrustViewController.m:<span class="number">220</span>:<span class="number">33</span></span><br><span class="line">    frame #<span class="number">14</span>: <span class="number">0x0000000250d38618</span> <span class="built_in">UIKitCore</span>`-[<span class="built_in">UITableView</span> _createPreparedCellForGlobalRow:withIndexPath:willDisplay:] + <span class="number">680</span></span><br><span class="line">    frame #<span class="number">15</span>: <span class="number">0x0000000250d38b18</span> <span class="built_in">UIKitCore</span>`-[<span class="built_in">UITableView</span> _createPreparedCellForGlobalRow:willDisplay:] + <span class="number">80</span></span><br><span class="line">    frame #<span class="number">16</span>: <span class="number">0x0000000250d05320</span> <span class="built_in">UIKitCore</span>`-[<span class="built_in">UITableView</span> _updateVisibleCellsNow:isRecursive:] + <span class="number">2260</span></span><br><span class="line">    frame #<span class="number">17</span>: <span class="number">0x0000000250d22640</span> <span class="built_in">UIKitCore</span>`-[<span class="built_in">UITableView</span> layoutSubviews] + <span class="number">140</span></span><br><span class="line">    frame #<span class="number">18</span>: <span class="number">0x0000000250fb1170</span> <span class="built_in">UIKitCore</span>`-[<span class="built_in">UIView</span>(<span class="built_in">CALayerDelegate</span>) layoutSublayersOfLayer:] + <span class="number">1292</span></span><br><span class="line">    frame #<span class="number">19</span>: <span class="number">0x00000002285cbc60</span> QuartzCore`-[<span class="built_in">CALayer</span> layoutSublayers] + <span class="number">184</span></span><br><span class="line">    frame #<span class="number">20</span>: <span class="number">0x00000002285d0c08</span> QuartzCore`CA::Layer::layout_if_needed(CA::Transaction*) + <span class="number">332</span></span><br><span class="line">    frame #<span class="number">21</span>: <span class="number">0x00000002285333e4</span> QuartzCore`CA::Context::commit_transaction(CA::Transaction*) + <span class="number">348</span></span><br><span class="line">    frame #<span class="number">22</span>: <span class="number">0x0000000228561620</span> QuartzCore`CA::Transaction::commit() + <span class="number">640</span></span><br><span class="line">    frame #<span class="number">23</span>: <span class="number">0x000000022856215c</span> QuartzCore`CA::Transaction::observer_callback(__CFRunLoopObserver*, <span class="type">unsigned</span> <span class="type">long</span>, <span class="type">void</span>*) + <span class="number">92</span></span><br><span class="line">    frame #<span class="number">24</span>: <span class="number">0x000000022401fd08</span> CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + <span class="number">32</span></span><br><span class="line">    frame #<span class="number">25</span>: <span class="number">0x000000022401aa30</span> CoreFoundation`__CFRunLoopDoObservers + <span class="number">412</span></span><br><span class="line">    frame #<span class="number">26</span>: <span class="number">0x000000022401afac</span> CoreFoundation`__CFRunLoopRun + <span class="number">1228</span></span><br><span class="line">    frame #<span class="number">27</span>: <span class="number">0x000000022401a7c0</span> CoreFoundation`<span class="built_in">CFRunLoopRunSpecific</span> + <span class="number">436</span></span><br><span class="line">    frame #<span class="number">28</span>: <span class="number">0x000000022621b79c</span> GraphicsServices`GSEventRunModal + <span class="number">104</span></span><br><span class="line">    frame #<span class="number">29</span>: <span class="number">0x0000000250b19c38</span> <span class="built_in">UIKitCore</span>`<span class="built_in">UIApplicationMain</span> + <span class="number">212</span></span><br><span class="line">    frame #<span class="number">30</span>: <span class="number">0x00000001024cd140</span> Gundam`main(argc=<span class="number">1</span>, argv=<span class="number">0x000000016dbc37f0</span>) at main.m:<span class="number">15</span>:<span class="number">16</span></span><br><span class="line">    frame #<span class="number">31</span>: <span class="number">0x0000000223ade8e0</span> libdyld.dylib`start + <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>然后通过单步调试，在汇编里面看到生成exception （creat）等等,最后定位到位置。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangkejie.com/iOS/network/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王科杰">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/iOS/network/index.html" class="post-title-link" itemprop="url">网络</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-10 11:26:39" itemprop="dateCreated datePublished" datetime="2017-01-10T11:26:39+08:00">2017-01-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">网络</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/iOS/network/index.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/iOS/network/index.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Http-和-Https-的区别？为什么更加安全？"><a href="#Http-和-Https-的区别？为什么更加安全？" class="headerlink" title="Http 和 Https 的区别？为什么更加安全？"></a><code>Http</code> 和 <code>Https</code> 的区别？为什么更加安全？</h2><h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><ul>
<li>1.<code>HTTPS</code> 需要向机构申请 <code>CA</code> 证书，极少免费。</li>
<li>2.<code>HTTP</code> 属于明文传输，<code>HTTPS</code>基于 <code>SSL</code> 进行加密传输。</li>
<li>3.<code>HTTP</code> 端口号为 <code>80</code>，<code>HTTPS</code> 端口号为 <code>443</code> 。</li>
<li>4.<code>HTTPS</code> 是加密传输，有身份验证的环节，更加安全。</li>
</ul>
<h3 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h3><p><strong>SSL(安全套接层)</strong><br><strong>TLS(传输层安全)</strong></p>
<p>以上两者在传输层之上，对网络连接进行加密处理，保障数据的完整性，更加的安全。</p>
<h2 id="TCP-IP-五层模型的协议"><a href="#TCP-IP-五层模型的协议" class="headerlink" title="TCP/IP 五层模型的协议?"></a><code>TCP/IP</code> 五层模型的协议?</h2><ul>
<li>应用层</li>
<li>传输层</li>
<li>网路层 </li>
<li>数据链路层</li>
<li>物理层</li>
</ul>
<h2 id="OSI-七层模型的协议"><a href="#OSI-七层模型的协议" class="headerlink" title="OSI 七层模型的协议?"></a><code>OSI</code> 七层模型的协议?</h2><ul>
<li>应用层 文件传输，电子邮件，文件服务，虚拟终端 TFTP，HTTP，SNMP，FTP，SMTP，DNS，Telnet</li>
<li>表示层 数据格式化，代码转换，数据加密 没有协议</li>
<li>会话层 解除或建立与别的接点的联系 没有协议</li>
<li>传输层 提供端对端的接口 TCP，UDP</li>
<li>网络层 为数据包选择路由 IP，ICMP，RIP，OSPF，BGP，IGMP</li>
<li>数据链路层 传输有地址的帧以及错误检测功能 SLIP，CSLIP，PPP，ARP，RARP，MTU</li>
<li>物理层 以二进制数据形式在物理媒体上传输数据 ISO2110，IEEE802，IEEE802.2</li>
</ul>
<h2 id="断点续传-功能该怎么实现？"><a href="#断点续传-功能该怎么实现？" class="headerlink" title="断点续传 功能该怎么实现？"></a><code>断点续传</code> 功能该怎么实现？</h2><ul>
<li>1.利用 <code>http</code> 的头部字段 ，设置 <code>http</code> 的 <code>Range</code> 属性</li>
<li>2.检测下载进度，并且判断是否需要重新创建下载文件</li>
</ul>
<h2 id="DNS-的解析过程？网络的-DNS-优化。"><a href="#DNS-的解析过程？网络的-DNS-优化。" class="headerlink" title="DNS 的解析过程？网络的 DNS 优化。"></a><code>DNS</code> 的解析过程？网络的 <code>DNS</code> 优化。</h2><blockquote>
<p><code>DNS</code> 是域名到 <code>IP</code> 地址的映射，<code>DNS</code> 解析使用 <code>UDP</code> 数据报，端口号53，并且采用明文传输的方式</p>
</blockquote>
<p>客户端在向服务端发送请求时，会先将 <code>域名</code> 到 <code>DNS</code> 服务器映射出 <code>IP</code> 地址，然后再访问。</p>
<h3 id="DNS-解析的两种方式"><a href="#DNS-解析的两种方式" class="headerlink" title="DNS 解析的两种方式"></a><code>DNS</code> 解析的两种方式</h3><h4 id="递归查询"><a href="#递归查询" class="headerlink" title="递归查询"></a>递归查询</h4><p>不断地自下而上遍历解析，“我去给你问一下”的方式</p>
<h4 id="迭代查询"><a href="#迭代查询" class="headerlink" title="迭代查询"></a>迭代查询</h4><p>迭代查询 是 “我告诉你谁可能知道”的方式</p>
<h3 id="DNS-解析存在的问题"><a href="#DNS-解析存在的问题" class="headerlink" title="DNS 解析存在的问题"></a><code>DNS</code> 解析存在的问题</h3><h4 id="DNS-劫持"><a href="#DNS-劫持" class="headerlink" title="DNS 劫持"></a><code>DNS</code> 劫持</h4><p>被钓鱼网站劫持，有可能返回错误的 <code>IP</code>，浏览的不是目标浏览器</p>
<h4 id="DNS-解析转发"><a href="#DNS-解析转发" class="headerlink" title="DNS 解析转发"></a><code>DNS</code> 解析转发</h4><p>晓得运营商可能将 <code>DNS</code> 解析请求转发，解析的比较慢，效率低</p>
<h3 id="DNS-劫持解决办法"><a href="#DNS-劫持解决办法" class="headerlink" title="DNS 劫持解决办法"></a><code>DNS</code> 劫持解决办法</h3><h4 id="httpDNS"><a href="#httpDNS" class="headerlink" title="httpDNS"></a>httpDNS</h4><p>使用 <code>http</code> 协议向 <code>DNS</code> 服务器 80 端口进行请求</p>
<h4 id="长连接"><a href="#长连接" class="headerlink" title="长连接"></a>长连接</h4><p>找一个中间的长连 <code>server</code> ,在内网专线进行 <code>Http</code> 请求。客户端和这个长连 <code>server</code>通信即可。</p>
<h2 id="Post请求体有哪些格式？"><a href="#Post请求体有哪些格式？" class="headerlink" title="Post请求体有哪些格式？"></a><code>Post</code>请求体有哪些格式？</h2><h3 id="application-x-www-form-urlencoded"><a href="#application-x-www-form-urlencoded" class="headerlink" title="application/x-www-form-urlencoded"></a>application/x-www-form-urlencoded</h3><p>这应该是最常见的 <code>POST</code> 提交数据的方式了。浏览器的原生 <code>form</code> 表单，如果不设置 <code>enctype</code> 属性，那么最终就会以 <code>application/x-www-form-urlencoded</code> 方式提交数据</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST  HTTP/1.1</span><br><span class="line">Host: www.demo.com</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line">Postman-Token: 81d7b315-d4be-8ee8-1237-04f3976de032</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">key=value&amp;testKey=testValue</span><br></pre></td></tr></table></figure>

<h3 id="multipart-form-data"><a href="#multipart-form-data" class="headerlink" title="multipart/form-data"></a>multipart/form-data</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">POST  HTTP/1.1</span><br><span class="line">Host: www.demo.com</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line">Postman-Token: 679d816d-8757-14fd-57f2-fbc2518dddd9</span><br><span class="line">Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundary7MA4YWxkTrZu0gW</span><br><span class="line">Content-Disposition: form-data; name=&quot;key&quot;</span><br><span class="line"></span><br><span class="line">value</span><br><span class="line">------WebKitFormBoundary7MA4YWxkTrZu0gW</span><br><span class="line">Content-Disposition: form-data; name=&quot;testKey&quot;</span><br><span class="line"></span><br><span class="line">testValue</span><br><span class="line">------WebKitFormBoundary7MA4YWxkTrZu0gW</span><br><span class="line">Content-Disposition: form-data; name=&quot;imgFile&quot;; filename=&quot;no-file&quot;</span><br><span class="line">Content-Type: application/octet-stream</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">data</span> <span class="attr">in</span> <span class="attr">here</span>&gt;</span></span><br><span class="line">------WebKitFormBoundary7MA4YWxkTrZu0gW--</span><br></pre></td></tr></table></figure>
<h3 id="application-json"><a href="#application-json" class="headerlink" title="application/json"></a>application/json</h3><h3 id="text-xml"><a href="#text-xml" class="headerlink" title="text/xml"></a>text/xml</h3><h2 id="什么是-Mimetype"><a href="#什么是-Mimetype" class="headerlink" title="什么是 Mimetype ?"></a>什么是 <code>Mimetype</code> ?</h2><p>在浏览器中显示的内容有 <code>HTML</code>、有 <code>XML</code>、有 <code>GIF</code>、还有 <code>Flash</code> ……那么，浏览器是如何区分它们，决定什么内容用什么形式来显示呢？答案是 <code>MIME Type</code>，也就是该资源的媒体类型。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//向该文件发送请求,根据请求头拿到该文件的MIMEType</span></span><br><span class="line">-(<span class="built_in">NSString</span> *)getMIMETypeURLRequestAtPath:(<span class="built_in">NSString</span>*)path</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//1.确定请求路径</span></span><br><span class="line">    <span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> fileURLWithPath:path];</span><br><span class="line">     </span><br><span class="line">    <span class="comment">//2.创建可变的请求对象</span></span><br><span class="line">    <span class="built_in">NSMutableURLRequest</span> *request = [<span class="built_in">NSMutableURLRequest</span> requestWithURL:url];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//3.发送请求</span></span><br><span class="line">    <span class="built_in">NSHTTPURLResponse</span> *response = <span class="literal">nil</span>;</span><br><span class="line">    [<span class="built_in">NSURLConnection</span> sendSynchronousRequest:request returningResponse:&amp;response error:<span class="literal">nil</span>];</span><br><span class="line">   </span><br><span class="line">    <span class="built_in">NSString</span> *mimeType = response.MIMEType;</span><br><span class="line">    <span class="keyword">return</span> mimeType;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="网络请求的状态码都大致代表什么意思？"><a href="#网络请求的状态码都大致代表什么意思？" class="headerlink" title="网络请求的状态码都大致代表什么意思？"></a>网络请求的状态码都大致代表什么意思？</h2><h3 id="1-1xx"><a href="#1-1xx" class="headerlink" title="1.1xx"></a>1.1xx</h3><blockquote>
<p>1xx 代表临时响应，需要请求者继续执行操作的状态代码。</p>
</blockquote>
<h3 id="2-2xx"><a href="#2-2xx" class="headerlink" title="2.2xx"></a>2.2xx</h3><blockquote>
<p>2xx 代表的多是操作成功。</p>
</blockquote>
<h3 id="3-3xx"><a href="#3-3xx" class="headerlink" title="3.3xx"></a>3.3xx</h3><blockquote>
<p>3xx 代表重定向，表示要完成请求，需要进一步操作</p>
</blockquote>
<h3 id="4-4xx"><a href="#4-4xx" class="headerlink" title="4.4xx"></a>4.4xx</h3><blockquote>
<p>4xx 代表请求错误，表示请求可能出错，妨碍了服务器的处理。</p>
</blockquote>
<h3 id="5-5xx"><a href="#5-5xx" class="headerlink" title="5.5xx"></a>5.5xx</h3><blockquote>
<p>5xx 代表服务器错误，表示服务器在尝试处理请求时发生内部错误。 这些错误可能是服务器本身的错误，而不是请求出错</p>
</blockquote>
<h2 id="如何判断一个请求是否结束？"><a href="#如何判断一个请求是否结束？" class="headerlink" title="如何判断一个请求是否结束？"></a>如何判断一个请求是否结束？</h2><ul>
<li>1.查看 <code>Content-Length</code> 是否达到 1024 字节。</li>
<li>2.通过 <code>Post</code> 发送请求时，消息一般都是一段一段返回的，看最后的一个 <code>chunked</code> 是否为空?</li>
</ul>
<h2 id="SSL-传输协议？说一下-SSL-验证过程？"><a href="#SSL-传输协议？说一下-SSL-验证过程？" class="headerlink" title="SSL 传输协议？说一下 SSL 验证过程？"></a>SSL 传输协议？说一下 SSL 验证过程？</h2><ul>
<li>1.配备了 <code>身份证书</code>，防止被冒充。</li>
<li>2.有 <code>校验机制</code>，一旦被篡改，双方都会知道。</li>
<li>3.通过 <code>加密</code> 进行传播。</li>
</ul>
<h3 id="连接过程如下："><a href="#连接过程如下：" class="headerlink" title="连接过程如下："></a>连接过程如下：</h3><ul>
<li>①：客户端向服务端发消息，包括客户端支持的 <code>加密算法</code> 以及 <code>随机数1</code> 、<code>TLS</code> 版本号。</li>
<li>②：服务端向客户端返回信息，包括双方已经匹配好的 <code>加密算法</code> 以及 <code>随机数2</code>、<code>Server证书</code> 。</li>
<li>③：服务端向客户端返回 <code>验证证书</code>。</li>
<li>④：客户端进行证书验证，首先要评估信任证书<ul>
<li>1.服务端向客户端返回证书的 <code>数字摘要</code> 与服务端证书返回客户端，解密后的是否一致，防止被篡改。</li>
<li>2.验证证书链：逐级验证服务端证书是否在可信任证书列表。</li>
<li>3.验证通过后：<ul>
<li>①：将 <code>随机数1</code>、<code>随机数2</code>、服务器端返回 <code>证书公钥</code> 加密过后的 <code>预主秘钥</code> 三者组合成 <code>会话密钥</code>。</li>
<li>②：服务端拿到 <code>会话秘钥</code>  后，会用服务端证书 <code>私钥</code>进行解密，得到 <code>预主秘钥</code>。</li>
<li>③：服务端将 <code>随机数1</code>、<code>随机数2</code>、服务器端证书私钥解密得到的 <code>预主秘钥</code> 三者组合成 <code>会话密钥</code>。此时客户端的 <code>会话秘钥</code> 和 服务端的 <code>会话秘钥</code> 应该是一致的。</li>
<li>④：接下来会经行验证：<pre><code>- 1.客户端通过 `会话秘钥`，加密信息发给服务端，看服务端能否成功接收。
- 2.服务端通过 `会话秘钥`，加密信息返给客户端，看客户端能否成功解析。
</code></pre>
</li>
</ul>
</li>
<li>4.以上步骤都通过了，此时 <code>SSL</code> 验证连接。</li>
</ul>
</li>
</ul>
<h2 id="解释一下-三次握手-和-四次挥手？"><a href="#解释一下-三次握手-和-四次挥手？" class="headerlink" title="解释一下 三次握手 和 四次挥手？"></a>解释一下 <code>三次握手</code> 和 <code>四次挥手</code>？</h2><h3 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h3><ul>
<li>1.由客户端向服务端发送 <code>SYN</code> 同步报文。</li>
<li>2.当服务端收到 <code>SYN</code> 同步报文之后，会返回给客户端 <code>SYN</code> 同步报文和 <code>ACK</code> 确认报文。</li>
<li>3.客户端会向服务端发送 <code>ACK</code> 确认报文，此时客户端和服务端的连接正式建立。</li>
</ul>
<h3 id="建立连接"><a href="#建立连接" class="headerlink" title="建立连接"></a>建立连接</h3><ul>
<li>1.这个时候客户端就可以通过 <code>Http</code> 请求报文，向服务端发送请求</li>
<li>2.服务端接收到客户端的请求之后，向客户端回复 <code>Http</code> 响应报文。</li>
</ul>
<h3 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h3><p><strong>当客户端和服务端的连接想要断开的时候，要经历四次挥手的过程，步骤如下：</strong></p>
<ul>
<li>1.先由客户端向服务端发送 <code>FIN</code> 结束报文。</li>
<li>2.服务端会返回给客户端 <code>ACK</code> 确认报文 。此时，由客户端发起的断开连接已经完成。</li>
<li>3.服务端会发送给客户端 <code>FIN</code> 结束报文 和 <code>ACK</code> 确认报文。</li>
<li>4.客户端会返回 <code>ACK</code> 确认报文到服务端，至此，由服务端方向的断开连接已经完成。</li>
</ul>
<h3 id="解释一下为什么是”三次握手”"><a href="#解释一下为什么是”三次握手”" class="headerlink" title="解释一下为什么是”三次握手”"></a>解释一下为什么是”三次握手”</h3><blockquote>
<p>客户端在与服务端建立连接的过程中，客户端向服务端发送连接请求，如果因为网络的原因，导致它超时触发了重传机制，那么客户端会重新向服务端发送一次连接请求，那有可能第二次发送的连接请求，服务端收到之后，直接返回给客户端确认连接的报文。</p>
</blockquote>
<blockquote>
<p>如果只需要两次就可以建立连接，假如说第一次建立连接的请求终于被服务端接收到了，那服务端收到之后，会以为客户端想新建另外一个链接，这样的话就会建立两个连接。</p>
</blockquote>
<blockquote>
<p>而采取三次握手，在客户端收到服务端的确认报文之后，客户端再向服务端发送一个确认报文，这时才正式建立连接。那么第一次因为超时而迟迟没有收到的建立连接的请求，这时在收到之后，服务端依然会向客户端返回一个确认报文，但是服务端现在已经与客户端建立的连接，所以客户端就不会再向服务端发送确认报文，服务端迟迟没有收到确认报文，那么也就不会真正的建立再一次连接。</p>
</blockquote>
<h3 id="又为什么是”四次挥手”？"><a href="#又为什么是”四次挥手”？" class="headerlink" title="又为什么是”四次挥手”？"></a>又为什么是”四次挥手”？</h3><blockquote>
</blockquote>
<p>建立的时候是双方面的建立，而释放的时候，也必然是客户端和服务端双方面的断开连接。</p>
<blockquote>
<p>客户端与服务端建立的连接是双通的，这也就意味着客户端可以向服务端发送请求，服务端向客户端返回响应，同样的也可以从服务端向客户端发送，然后由客户端向服务端返回，如果你只关闭了客户端，向服务端通道，这只叫半关闭状态，并没有完全的切断客户端与服务端的关联。</p>
</blockquote>
<h2 id="谈一谈网络中的-session-和-cookie"><a href="#谈一谈网络中的-session-和-cookie" class="headerlink" title="谈一谈网络中的 session 和 cookie?"></a>谈一谈网络中的 <code>session</code> 和 <code>cookie</code>?</h2><p>因为 <code>Http</code> 无状态的特性，如果需要判断是哪个用户，这时就需要 <code>Cookie</code> 和 <code>Session</code>。</p>
<p><code>Cookie</code> 存储在客户端，用来记录用户状态，区分用户。一般都是服务端把生成的 <code>Cookie</code> 通过响应返回给客户端，客户端保存。</p>
<p><code>Session</code> 存储在网络端，需要依赖 <code>Cookie</code> 机制。服务端生成了 <code>Session</code> 后，返回给客户端，客户端 <code>setCookie:sessionID</code>，所以下次请求的时候，客户端把 <code>Cookie</code> 发送给服务端，服务端解析出 <code>SessionID</code>，在服务端根据 <code>SessionID</code> 判断当前的用户。</p>
<h3 id="如何修改-Cookie"><a href="#如何修改-Cookie" class="headerlink" title="如何修改 Cookie?"></a>如何修改 <code>Cookie</code>?</h3><ul>
<li><p>相同 <code>Key</code> 值得新的 <code>Cookie</code> 会覆盖旧的 <code>Cookie</code>.</p>
</li>
<li><p>覆盖规则是 name path 和 domain 等需要与原有的一致</p>
</li>
</ul>
<h3 id="如何删除-Cookie"><a href="#如何删除-Cookie" class="headerlink" title="如何删除 Cookie?"></a>如何删除 <code>Cookie</code>?</h3><ul>
<li><p>相同 <code>Key</code> 值得新的 <code>Cookie</code> 会覆盖旧的 <code>Cookie</code>.</p>
</li>
<li><p>覆盖规则是 name path 和 domain 等需要与原有的一致</p>
</li>
<li><p>设置 <code>Cookie</code> 的 <code>expires</code> 为过去的一个时间点，或者 <code>maxAge = 0</code></p>
</li>
</ul>
<h3 id="如何保证-Cookie-的安全？"><a href="#如何保证-Cookie-的安全？" class="headerlink" title="如何保证 Cookie 的安全？"></a>如何保证 <code>Cookie</code> 的安全？</h3><ul>
<li>对 <code>Cookie</code> 进行加密处理</li>
<li>只在 <code>Https</code> 上携带 <code>Cookie</code>。 </li>
<li>设置 <code>Cookie</code> 为 <code>httpOnly</code>，防止跨站脚本攻击。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangkejie.com/iOS/hybrid/hybrid.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王科杰">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/iOS/hybrid/hybrid.html" class="post-title-link" itemprop="url">Hybrid</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-12-31 00:00:00" itemprop="dateCreated datePublished" datetime="2015-12-31T00:00:00+08:00">2015-12-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Hybrid/" itemprop="url" rel="index"><span itemprop="name">Hybrid</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/iOS/hybrid/hybrid.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/iOS/hybrid/hybrid.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Hybrid"><a href="#Hybrid" class="headerlink" title="Hybrid"></a>Hybrid</h1><p>为什么需要这种设计，或者技术方案，我们就不多说了,但是我还是要强调几点个人的见解</p>
<ul>
<li>最好不要大面积使用此方案，以免影响用户体验，最好别超过项目的30%。</li>
<li>在某些页面变化比较大，而又不太需要性能的页面，采取此设计非常合适</li>
<li>还有一个非常重要的，一定要注意，此交互方案在app内是异步线程，注意要回到主线程处理UI。安卓和iOS都是如此！！！</li>
</ul>
<h2 id="在安卓上面"><a href="#在安卓上面" class="headerlink" title="在安卓上面"></a>在安卓上面</h2><p>我们有三种方案，分别是 </p>
<ol>
<li>Native提供方法，js调用Native方法</li>
<li>Native在本地注入js方法并且调用</li>
<li>Webview拦截Ajax请求，并做业务处理</li>
</ol>
<h2 id="Native提供方法，js调用Native方法"><a href="#Native提供方法，js调用Native方法" class="headerlink" title="Native提供方法，js调用Native方法"></a>Native提供方法，js调用Native方法</h2><ul>
<li>native注入对象（有一系列供js使用的方法）以及提供给js调用的名称。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">webView.addJavascriptInterface(<span class="keyword">new</span> <span class="title class_">HybridJsInterface</span>(),<span class="string">&quot;HybridJSInterface&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>native提供可以供js调用的方法。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HybridJsInterface</span> &#123;</span><br><span class="line">    <span class="meta">@JavascriptInterface</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">(String text)</span></span><br><span class="line">    Log.i(<span class="string">&quot;method hello&quot;</span>,<span class="string">&quot;text=&quot;</span>+text);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>js调用native的方法。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hybrid</span>(<span class="params"></span>)&#123;    </span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">HybridJSInterface</span>.<span class="title function_">hello</span>(<span class="string">&quot;hello hybrid&quot;</span>); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Native在本地注入js方法并且调用"><a href="#Native在本地注入js方法并且调用" class="headerlink" title="Native在本地注入js方法并且调用"></a>Native在本地注入js方法并且调用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    function helloJs()&#123;</span> </span><br><span class="line"><span class="comment">//        alert(&quot;hello js&quot;);</span> </span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="type">String</span> <span class="variable">script</span> <span class="operator">=</span> <span class="string">&quot;function helloJs()&#123; alert(&#x27;hello js&#x27;);&#125;&quot;</span>;</span><br><span class="line"><span class="comment">//script是js方法对应的字符串</span></span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</span><br><span class="line">    mWebContent.evaluateJavascript(script, <span class="literal">null</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    mWebContent.loadUrl(<span class="string">&quot;javascript:&quot;</span> + script);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">handle</span> <span class="operator">=</span> <span class="string">&quot;helloJs()&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</span><br><span class="line">      mWebContent.evaluateJavascript(handle, <span class="literal">null</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      mWebContent.loadUrl(<span class="string">&quot;javascript:&quot;</span> + handle);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>


<h2 id="Webview拦截Ajax请求，并做业务处理"><a href="#Webview拦截Ajax请求，并做业务处理" class="headerlink" title="Webview拦截Ajax请求，并做业务处理"></a>Webview拦截Ajax请求，并做业务处理</h2><ol>
<li><p>native拦截h5发过来的请求协议（自定义协议）。<br>webview位置拦截的WebViewClient对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webView.setWebViewClient(<span class="keyword">new</span> <span class="title class_">HybridWebViewClient</span>());</span><br></pre></td></tr></table></figure>
<p>HybridWebViewClient重写shouldOverrideUrlLoading方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">shouldOverrideUrlLoading</span><span class="params">(WebView view, String url)</span> &#123;<span class="type">Uri</span> <span class="variable">parse</span> <span class="operator">=</span> Uri.parse(url);</span><br><span class="line">       <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> parse.getPath();witch (path) &#123;</span><br><span class="line">           <span class="comment">//TODO</span> </span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>js那边发起请求协议。</p>
</li>
</ol>
<h2 id="方案分析"><a href="#方案分析" class="headerlink" title="方案分析"></a>方案分析</h2><p>这三种方案单独使用都比较有局限性。</p>
<ul>
<li><p>方案一的思路是native提前给h5实现好h5需要使用的方法，方法调用完全由h5控制，缺陷是h5调用的功能实现都由native实现，当h5页面中需要新功能的时候需要修改native才能支持。</p>
</li>
<li><p>方案二的思路是js提前给native提供方法，方法调用完全由native控制，缺陷是当js提供了新的方法那么需要修改native主动调用才能使用新功能。</p>
</li>
<li><p>方案三的思路是native拦截h5发过了的请求进行分发控制，js需要使用的功能是native已经提前准备好的，使用不同的url进行分发来使用，缺陷是h5使用新的功能那么需要修改native提供新功能。</p>
</li>
</ul>
<p>单独使用这三种方案的共同缺点就是js和native都是一个单向的调用，相互太过依赖。要是三种方案都用上是不是可以解决问题呢，其实根本问题不在这里，而在于这些方案都没有办法动态扩展，也就是说native一旦完成之后那么单纯靠js是很难完成功能扩展的。我们需要一种可以适应一定程度动态扩展的方案，那就让h5作为项目主导，native提供服务。 </p>
<h3 id="hybrid设计"><a href="#hybrid设计" class="headerlink" title="hybrid设计"></a>hybrid设计</h3><p>总体设计思路是h5控制整个业务流程以及交互流程。h5那边负责发命令并且回调，native负责响应命令。我是采用方案三来实现，客户端需要做的就是预先处理好这些命令（url）。既然是响应命令那么首先就需要把和业务无关的命令给整理出来，比较通用的包括下面内容（不一定全）：</p>
<ul>
<li>header控制。</li>
</ul>
<p>heade的样式可以参考新闻类app的详情页（这里不截图），包括内容：左边按钮（多个），右边按钮（多个），主标题，副标题。</p>
<p>需要做的控制是左、右按钮是否显示、显示的文本及图标以及点击按钮的回调，主、副标题是否显示及显示内容。</p>
<ul>
<li>页面刷新。</li>
</ul>
<p>页面刷新用于内容改变之后h5主动通知native进行刷新。</p>
<ul>
<li>页面跳转。</li>
</ul>
<p>页面跳转分成两种一种是页面跳转到一个新的native页面，另一种是在webview内部做跳转。native的跳转包括内容：跳转动画、跳转目标页、目标页需要的参数。</p>
<ul>
<li>loadingview/progressbar。</li>
</ul>
<p>通常情况建议直接使用h5的进度显示。loadingview的控制包括：loadingview是否显示，loadingview的显示样式（通常只有一种样式）。</p>
<ul>
<li>传感器数据。</li>
</ul>
<p>传感器这部分不一定每个应用都需要。比如某些h5页面需要做活动，那么里面可能会用的摇一摇这样的功能。传感器的控制包括：地理位置、方向、震动、运动量。</p>
<ul>
<li>h5离线包更新。</li>
</ul>
<p>离线包的更新对于h5来说是一条更新命令。不过在native实现上面需要包括：离线包更新检查（版本比较）、离线包下载、离线包解压保存。</p>
<ul>
<li>离线包开关。</li>
</ul>
<p>是否使用离线数据。native需要做的是开启离线包命令之后需要把请求的url映射到本地文件缓存。</p>
<ul>
<li>数据请求。</li>
</ul>
<p>数据请求是指h5需要请求数据不通过直接网络访问，而是通过native自己的网络服务获取数据，尤其是在跨域的情况下很方便。</p>
<h1 id="iOS上面"><a href="#iOS上面" class="headerlink" title="iOS上面"></a>iOS上面</h1><p>同样的，iOS也具备上述三个方案，分别是</p>
<ul>
<li>JavaScriptCore</li>
<li>WebviewLoad</li>
<li>Url Schema</li>
</ul>
<h2 id="JavaScriptCore"><a href="#JavaScriptCore" class="headerlink" title="JavaScriptCore"></a>JavaScriptCore</h2><p>在ios7后，Apple新增了一个JavaScriptCore让Native可以与H5更好的交互（Android早就有了），我们这里主要讨论js如何与Native通信，这里举一个简单的例子：<br>① 首先定义一个js方法，这里注意其中调用了一个没有声明的方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//未声明方法</span></span><br><span class="line">    <span class="title function_">print</span>(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后，上述未声明方法事实上是Native注入给window对象的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">NSString * scriptPath = [[NSBundle mainBundle] pathForResource:@&quot;hello&quot; ofType:@&quot;js&quot;];</span><br><span class="line">NSString * scriptString = [NSString stringWithContentsOfFile:scriptPath encoding:NSUTF8StringEncoding error:nil];</span><br><span class="line"></span><br><span class="line">JSContext *context = [[JSContext alloc] init];</span><br><span class="line">[context evaluateScript:scriptString];</span><br><span class="line"></span><br><span class="line">self.context[@&quot;print&quot;] = ^(NSString *text) &#123;</span><br><span class="line">    NSLog(@&quot;%@&quot;, text&quot;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">JSValue *function = self.context[@&quot;printHello&quot;];</span><br><span class="line">[function callWithArguments:@[]];</span><br></pre></td></tr></table></figure>
<p>这个样子，JavaScript就可以调用Native的方法了，这里Native需要注意方法注入的时机，一般是一旦载入页面便需要载入变量</p>
<ul>
<li>此方案需要特别注意的就是注入时机，要保证JS能调用到注入的方法</li>
</ul>
<h2 id="WebviewLoad"><a href="#WebviewLoad" class="headerlink" title="WebviewLoad"></a>WebviewLoad</h2><p>此方案和安卓一样</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[self.wkWebView loadHTMLString:@&quot;javascriptStr&quot; baseURL:@&quot;urlstr&quot;];</span><br></pre></td></tr></table></figure>

<h2 id="Url-Schema"><a href="#Url-Schema" class="headerlink" title="Url Schema"></a>Url Schema</h2><p>H5与Native交互的桥梁为Webview，而“联系”的方式是以url schema的方式做的，在用户安装app后，app可以自定义url schema，并且把自定义的url注册在调度中心， 例如</p>
<ul>
<li>dongfangdi://open 打开懂房帝App</li>
<li>weixin:// 打开微信</li>
</ul>
<p>事实上Native能捕捉webview发出的一切请求，所以就算这里不是这种协议，Native也能捕捉，这个协议的意义在于可以在浏览器中直接打开APP，<br>我们在H5获取Native方法时一般是会构造一个这样的请求，使用iframe发出（设置location会有多次请求覆盖的问题）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">requestHybrid</span>(&#123;</span><br><span class="line">  <span class="comment">//创建一个新的webview对话框窗口</span></span><br><span class="line">  <span class="attr">tagname</span>: <span class="string">&#x27;dongfangdiApi&#x27;</span>,</span><br><span class="line">  <span class="comment">//请求参数，会被Native使用</span></span><br><span class="line">  <span class="attr">param</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">//Native处理成功后回调前端的方法</span></span><br><span class="line">  <span class="attr">callback</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//=====&gt;</span></span><br><span class="line"><span class="attr">dongfangdi</span>:<span class="comment">//dongfangdi?callback=dongfangdiAction&amp;param=%7B%22data1%22%3A1%2C%22data2%22%3A2%7D</span></span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>由于一开始我就强调过，不要完全依赖Hybrid来做app主要框架，它只是为我们提供更多的页面热更新，页面获取Native信息的一种技术。</p>
<ul>
<li>在iOS8.0以后，WebKit框架又给我们提供了一套方案</li>
<li>在WKUserContentController类中,我们可以看到这个方法<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/*! @abstract Adds a script message handler.</span><br><span class="line"> @param scriptMessageHandler The message handler to add.</span><br><span class="line"> @param name The name of the message handler.</span><br><span class="line"> @discussion Adding a scriptMessageHandler adds a function</span><br><span class="line"> window.webkit.messageHandlers.&lt;name&gt;.postMessage(&lt;messageBody&gt;) for all</span><br><span class="line"> frames.</span><br><span class="line"> */</span><br><span class="line">- (void)addScriptMessageHandler:(id &lt;WKScriptMessageHandler&gt;)scriptMessageHandler name:(NSString *)name;</span><br></pre></td></tr></table></figure>
然后我们可以在下面这个方法中处理对应的name<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message&#123;&#125;</span><br></pre></td></tr></table></figure>
强烈推荐此方法！！！</li>
</ul>
<p>相关demo代码已放在github上</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0phY2stVmluZy9IeWJyaWRfSW50ZXJhY3Rpb24=">https://github.com/Jack-Ving/Hybrid_Interaction<i class="fa fa-external-link-alt"></i></span>  这个是用Vue写的对应的js代码</li>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0phY2stVmluZy9IeWJyaWQ=">https://github.com/Jack-Ving/Hybrid<i class="fa fa-external-link-alt"></i></span>  这个是采用拦截的方式写的OC代码</li>
</ul>
<p>由于仓促，如果遇到什么问题，尽管联系我.</p>
<blockquote>
<p>QQ:727881945  微信:Q727881945</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangkejie.com/linux/home.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王科杰">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/linux/home.html" class="post-title-link" itemprop="url">Linux</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-10-10 11:26:39" itemprop="dateCreated datePublished" datetime="2015-10-10T11:26:39+08:00">2015-10-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/linux/home.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/linux/home.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>Linux内核官网<a href="www.kernel.org">www.kernel.org</a></p>
<ul>
<li>内核版本2.6.18  3.16等等</li>
<li>发行版本 redhat==conterOS ubuntu debian等等</li>
</ul>
<ul>
<li>使用的自由<ul>
<li>绝大多数开源软件免费</li>
</ul>
</li>
<li>研究的自由<ul>
<li>可以获得软件源代码</li>
</ul>
</li>
<li>散步及改良的自由<ul>
<li>可以自由传播、改良甚至销售</li>
</ul>
</li>
</ul>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><ul>
<li>基于Linux服务器</li>
<li>嵌入式应用 手机，接顶盒等等</li>
</ul>
<h2 id="Linux和Windows的不同"><a href="#Linux和Windows的不同" class="headerlink" title="Linux和Windows的不同"></a>Linux和Windows的不同</h2><ul>
<li>Linux严格区分大小写</li>
<li>Linux中所有内容以文件形式保存，包括硬件</li>
<li>以前内容皆文件</li>
<li>Linux不靠扩展名区分文件类型  (-&gt;权限)<ul>
<li>压缩包 .gz .bz2 .tar.bz2  .tgz登</li>
<li>二进制软件包：.rpm</li>
<li>网页文件： *.html  .php</li>
<li>脚本文件： *.sh</li>
<li>配置文件： *.conf</li>
</ul>
</li>
</ul>
<h2 id="字符界面"><a href="#字符界面" class="headerlink" title="字符界面"></a>字符界面</h2><ul>
<li>占用系统资源更少</li>
<li>减少出错、被攻击的可能性越少</li>
</ul>
<h2 id="挂载-给每个分区分配挂载点"><a href="#挂载-给每个分区分配挂载点" class="headerlink" title="挂载 给每个分区分配挂载点"></a>挂载 给每个分区分配挂载点</h2><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><ul>
<li>服务器最小化安装</li>
</ul>
<h2 id="安装日志"><a href="#安装日志" class="headerlink" title="安装日志"></a>安装日志</h2><ul>
<li>/root/install.log: 储存了安装在系统中的软件包及其版本信息</li>
<li>/root/install.log.syslog: 储存了安装过程中留下的事件记录</li>
<li>/root/anaconda-ks.cfg: 以Kickstart配置文件的格式记录安装过程中设置的选项信息</li>
</ul>
<h1 id="常用的目录的作用"><a href="#常用的目录的作用" class="headerlink" title="常用的目录的作用"></a>常用的目录的作用</h1><ul>
<li>/根目录</li>
<li>/bin 命令保存目录（普通用户就可以读取的命令）</li>
<li>/sbin 超级权限才能读取的命令</li>
<li>/boot 启动目录，启动相关文件</li>
<li>/dev 设备文件保存目录</li>
<li>/etc 配置文件</li>
<li>/home 普通用户家目录</li>
<li>/lib 系统库保存目录</li>
<li>/mnt 系统挂载目录</li>
<li>/media 挂载目录</li>
<li>/proc和/sys 目录不能直接操作，保存的是内存的过载点</li>
<li>/usr 系统软件资源目录<ul>
<li>/usr/bin/ 系统命令（普通用户）</li>
<li>/usr/sbin/ 系统命令（超级用户）</li>
</ul>
</li>
<li>/var 系统相关文档内容</li>
</ul>
<h1 id="常用命令-文件处理命令"><a href="#常用命令-文件处理命令" class="headerlink" title="常用命令(文件处理命令)"></a>常用命令(文件处理命令)</h1><h2 id="命令的基本格式"><a href="#命令的基本格式" class="headerlink" title="命令的基本格式"></a>命令的基本格式</h2><ul>
<li>~代表当前所在位置 家目录,初始目录</li>
<li>#代表超级用户</li>
<li>$代表普通用户</li>
</ul>
<ul>
<li><code>命令 [选项] [参数]</code>  -a  -all简化</li>
</ul>
<h2 id="文件格式"><a href="#文件格式" class="headerlink" title="文件格式"></a>文件格式</h2><ul>
<li>rw- r– r– 分为三组，三组的权限</li>
<li>-文件类型(- 文件， d 目录， | 软连接文件)</li>
<li>rw-   r–   r–</li>
<li>所有者 g所属着 o其他人</li>
<li>r读 w写 x执行</li>
<li>.文件为隐藏文件</li>
</ul>
<h2 id="pwd-显示当前所在路径-print-working-dictionary"><a href="#pwd-显示当前所在路径-print-working-dictionary" class="headerlink" title="pwd 显示当前所在路径 print working dictionary"></a>pwd 显示当前所在路径 print working dictionary</h2><h2 id="mkdir-p-目录名"><a href="#mkdir-p-目录名" class="headerlink" title="mkdir -p [目录名]"></a>mkdir -p [目录名]</h2><ul>
<li>-p 递归创建  /s/p 这样的</li>
</ul>
<h2 id="cd-进入目录"><a href="#cd-进入目录" class="headerlink" title="cd 进入目录"></a>cd 进入目录</h2><ul>
<li>~进入当前用户目录，家目录</li>
<li>..上一级目录</li>
<li>.当前目录</li>
</ul>
<h2 id="rmdir-目录-remove-empty-dir"><a href="#rmdir-目录-remove-empty-dir" class="headerlink" title="rmdir [目录] remove empty dir"></a>rmdir [目录] remove empty dir</h2><ul>
<li>只能删除空白目录</li>
</ul>
<h2 id="rm-rf-不询问是否删除"><a href="#rm-rf-不询问是否删除" class="headerlink" title="rm -rf 不询问是否删除"></a>rm -rf 不询问是否删除</h2><ul>
<li>-r 删除目录</li>
<li>-f 强制</li>
</ul>
<h2 id="cp-选项-源文件-目标目录"><a href="#cp-选项-源文件-目标目录" class="headerlink" title="cp [选项] [源文件] [目标目录]"></a>cp [选项] [源文件] [目标目录]</h2><ul>
<li>-r 复制目录</li>
<li>-p 连带文件属性复制</li>
<li>-d 若源文件是链接文件，则复制链接属性</li>
<li>-a 相当于 -pdr</li>
</ul>
<h2 id="mv-剪切或者改名命令"><a href="#mv-剪切或者改名命令" class="headerlink" title="mv 剪切或者改名命令"></a>mv 剪切或者改名命令</h2><ul>
<li>源文件或者目录和目标文件目录  在一起，就是改名</li>
</ul>
<h2 id="链接命令"><a href="#链接命令" class="headerlink" title="链接命令"></a>链接命令</h2><ul>
<li>ln -s [源文件] [目标文件]</li>
<li>命令英文愿意： link</li>
<li>功能描述：生成链接文件<ul>
<li>选项： -s 创建软链接</li>
</ul>
</li>
</ul>
<ul>
<li>硬链接特征 (i 文件索引点)<ol>
<li>拥有相同的i节点和储存block块，可以看作是同一个文件</li>
<li>可通过i节点识别</li>
<li>不能跨分区</li>
<li>不能准对目录使用</li>
<li>引用计数加1，同一个文件</li>
</ol>
</li>
<li>软链接特征<ul>
<li>类似于windows快捷方式</li>
<li>拥有自己的i节点和block块，但是数据块中只保存源文件的文件名和i节点号，并没有实际的文件数据</li>
<li>Irwxrwxrwx I 软连接<ul>
<li>软连接文件的权限都为rwxrwxrwx</li>
</ul>
</li>
<li>修改任意文件，另一个都改变</li>
<li>删除源文件，软连接不能使用</li>
</ul>
</li>
</ul>
<h1 id="文件搜索命令"><a href="#文件搜索命令" class="headerlink" title="文件搜索命令"></a>文件搜索命令</h1><ul>
<li>文件搜索命令locate</li>
<li>命令搜索命令whereis与which</li>
<li>文件搜索命令find</li>
<li>字符串搜索命令grep</li>
<li>find命令与grep命令的区别</li>
</ul>
<h2 id="locate-速度相对较快"><a href="#locate-速度相对较快" class="headerlink" title="locate (速度相对较快)"></a>locate (速度相对较快)</h2><ul>
<li>locate 文件名。 在后台数据库中按照文件名搜索，搜索速度更快</li>
<li>/var/lib/mlocate  #locate命令所搜索的后台数据库</li>
<li>updatedb 更新数据库, 可能是一天更新一次,开机更新一次</li>
</ul>
<h2 id="whereis与which-搜索命令的命令"><a href="#whereis与which-搜索命令的命令" class="headerlink" title="whereis与which 搜索命令的命令"></a>whereis与which 搜索命令的命令</h2><ul>
<li>where 只能搜索<code>系统的命令</code><ul>
<li>-b 只查看命令所在位置</li>
<li>-m 只差看帮助文档</li>
</ul>
</li>
<li>which 只能搜索<code>系统的命令</code><ul>
<li>看命令所在位置,还能查到看别名</li>
</ul>
</li>
</ul>
<h2 id="find命令"><a href="#find命令" class="headerlink" title="find命令"></a>find命令</h2><ul>
<li><p>find [搜索范围] [搜索条件]</p>
</li>
<li><p>find / -name install.log</p>
<ul>
<li>避免大范围搜索，会非常耗费系统资源</li>
<li>find是在系统当中搜索符合条件的文件名。如果需要匹配，通常使用通配符匹配，<code>通配符</code>是完全匹配</li>
</ul>
</li>
<li><p><code>*</code> 匹配任意字符</p>
</li>
<li><p><code>?</code> 匹配任意一个字符</p>
</li>
<li><p><code>[]</code> 匹配任意一个中括号内的字符 find -name ab[cd]</p>
</li>
<li><p>find /root -inname install.log  就不区分大小写了</p>
</li>
<li><p>find /root -user root 按照所有者搜索</p>
</li>
<li><p>find /root -nouser 查找没有所有者的文件</p>
</li>
<li><p>find /var/log/ -mtime +10 <code>查找10天前修改的文件</code></p>
<ul>
<li>-10 10天内修改的文件</li>
<li>10 10天当天修改的文件</li>
<li>+10 10天前修改的文件</li>
<li>atime 文件访问时间</li>
<li>ctime 改变文件属性</li>
<li>mtime 修改文件内容</li>
</ul>
</li>
<li><p>find . -size 25k <code>查找文件大小是25k的文件</code></p>
<ul>
<li>-25k 小于25KB的文件  注意是小写的<code>k</code>，兆字节用大写的<code>M</code></li>
<li>25k 等于25KB的文件</li>
<li>+25k 大于25KB的文件 </li>
<li>find . -size 25 不加单位就是扇区搜索</li>
</ul>
</li>
<li><p>find /root -inum 262422 <code>查找i节点是262422</code>的文件</p>
</li>
<li><p>find /etc -size +20k -a -size -50k</p>
<ul>
<li><code>查找/etc/目录下，大于20kb小于50kb的文件</code></li>
<li>-a and 逻辑与，两个条件都满足</li>
<li>-0 or  逻辑或，两个条件满足一个即可</li>
</ul>
</li>
<li><p>find /etc -size +20k -a -size -50k -exec ls -lh {} ;</p>
<ul>
<li><code>查找/etc/目录下，大于20KB并且小于50KB的文件，并显示详细信息</code></li>
<li><code>-exec/-ok 命令&#123;&#125; \; 对搜索结果执行操作,&quot;&#123;&#125; \;&quot;为标准格式，只要有-exec就要写它</code></li>
</ul>
</li>
</ul>
<h2 id="grep命令"><a href="#grep命令" class="headerlink" title="grep命令"></a>grep命令</h2><ul>
<li>grep [选项] 字符串 文件名<ul>
<li>在文件档中匹配符合条件的字符串</li>
<li>-i 忽略大小写</li>
<li>-v 排除指定字符串</li>
</ul>
</li>
</ul>
<h2 id="find-与-grep区别"><a href="#find-与-grep区别" class="headerlink" title="find 与 grep区别"></a>find 与 grep区别</h2><ul>
<li>find命令，在当前系统中搜索符合条件的文件名，如果需要匹配。使用通配符匹配，通配符是完全匹配</li>
<li>grep命令：在文件当中搜索符合条件的字符串，如果需要匹配，使用正则表达式进行匹配，正则表达式是包含匹配</li>
</ul>
<h1 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h1><ul>
<li><p>man帮助等级</p>
<ol>
<li>查看命令的帮助</li>
<li>查看可被内核调用的函数的帮助</li>
<li>查看函数和函数库的帮助</li>
<li>查看特殊文件的帮助（主要是/dev目录下的文件）</li>
<li>查看配置文件的帮助</li>
<li>查看游戏的帮助</li>
<li>查看其他杂项的帮助</li>
<li>查看系统管理员可用命令的帮助</li>
<li>查看和内核相关文件的帮助</li>
</ol>
</li>
<li><p>man 命令 -&gt; 获取指定命令的帮助  man ls</p>
</li>
<li><p>man -f 相当于 whatis 命令</p>
</li>
<li><p>man -k 相当于 apropos命令 eg: apropos passwd</p>
</li>
<li><p>shell内部命令帮助</p>
<ul>
<li>help 只能获取shell内部命令的帮助 eg： whereis cd. help cd</li>
<li>是安装的软件，就有路径，比如 /bin/ls ,如果 没有比如cd 就是shell内部命令。『whereis cd』</li>
</ul>
</li>
<li><p>info 命令</p>
<ul>
<li>回车  进入子帮助页面 (带有*号标记)</li>
<li>u 上层</li>
<li>n 下一帮助小节</li>
<li>p 上一帮助小节</li>
<li>q 退出</li>
</ul>
</li>
</ul>
<h1 id="压缩与解压缩命令"><a href="#压缩与解压缩命令" class="headerlink" title="压缩与解压缩命令"></a>压缩与解压缩命令</h1><blockquote>
<p><code>.zip</code> .7z .rar <code>.gz</code> <code>.bz2</code> .tar.gz .tar.bz2等等</p>
</blockquote>
<h2 id="zip格式"><a href="#zip格式" class="headerlink" title=".zip格式"></a>.zip格式</h2><ul>
<li>zip 压缩文件名  源文件名  eg: <code>zip xxx.zip xxx</code></li>
<li>zip -r 压缩目录 源文件</li>
<li>unzip 解压缩文件</li>
</ul>
<h2 id="gz格式"><a href="#gz格式" class="headerlink" title=".gz格式"></a>.gz格式</h2><ul>
<li>gzip 源文件 <code>压缩为.gz格式的压缩文件，源文件会消失</code></li>
<li>gzip -c 源文件 &gt; 压缩文件  <ul>
<li>压缩为.gz 格式，源文件保留</li>
<li>eg： gzip -c cangls &gt; cangls.gz</li>
</ul>
</li>
<li>gzip -r 目录<ul>
<li><code>压缩目录下所有的子文件，但是不能压缩目录</code></li>
</ul>
</li>
<li>gzip -d 解压缩</li>
<li>gunzip 解压缩</li>
</ul>
<h2 id="bz2格式"><a href="#bz2格式" class="headerlink" title=".bz2格式"></a>.bz2格式</h2><ul>
<li>bzip2 源文件 不保留源文件</li>
<li>bzip2 -k 源文件<ul>
<li>压缩之后保留源文件<blockquote>
<p><code>注意：bzip2命令不能压缩目录</code></p>
</blockquote>
</li>
</ul>
</li>
<li>bzip2 -d 解压缩  <code>-k保留源文件</code></li>
<li>bunzip2  <code>-k保留源文件</code></li>
</ul>
<h2 id="tar-gz-tar-bz2"><a href="#tar-gz-tar-bz2" class="headerlink" title=".tar.gz  .tar.bz2"></a>.tar.gz  .tar.bz2</h2><p>先压缩成.tar 再压缩成.gz / .bz2</p>
<h3 id="tar-cvf-打包文件名-源文件"><a href="#tar-cvf-打包文件名-源文件" class="headerlink" title="tar -cvf 打包文件名 源文件"></a>tar -cvf 打包文件名 源文件</h3><ul>
<li><p>-c 打包</p>
</li>
<li><p>-v 显示过程</p>
</li>
<li><p>-f 指定打包后的文件名</p>
</li>
<li><p>-x 解压缩 eg -xvf</p>
</li>
<li><p>-t 只查看</p>
</li>
<li><p>.tar.gz （z)</p>
<ul>
<li><code>-z 压缩为.tar.gz格式</code>  tar -zcvf xx.tar.gz 源文件</li>
<li><code>-x 解压缩为.tar.gz格式</code> tar -zxvf xx.tar.gz </li>
</ul>
</li>
<li><p>.tar.bz2 (j)</p>
<ul>
<li><code>-j 压缩为.tar.bz2格式</code>   tar -jcvf xx.tar.bz2 源文件</li>
<li><code>-x 解压缩为.tar.bz2格式</code>  tar -jxvf xx.tar.bz2 </li>
</ul>
</li>
<li><p>-C 位置</p>
</li>
</ul>
<h1 id="关机和重启命令"><a href="#关机和重启命令" class="headerlink" title="关机和重启命令"></a>关机和重启命令</h1><h2 id="shutdown-选项-时间"><a href="#shutdown-选项-时间" class="headerlink" title="shutdown [选项] 时间"></a>shutdown [选项] 时间</h2><ul>
<li>-c 取消前一个关机命令</li>
<li>-h 关机</li>
<li>-r 重启</li>
</ul>
<h2 id="其他关机命令-非安全，建议shutdown"><a href="#其他关机命令-非安全，建议shutdown" class="headerlink" title="其他关机命令 (非安全，建议shutdown)"></a>其他关机命令 (非安全，建议shutdown)</h2><ul>
<li>halt  (非安全，建议shutdown)</li>
<li>poweroff (非安全，建议shutdown)</li>
<li>init 0 (非安全，建议shutdown)</li>
</ul>
<h2 id="其他重启命令"><a href="#其他重启命令" class="headerlink" title="其他重启命令"></a>其他重启命令</h2><ul>
<li>reboot 相对安全</li>
<li>init 6 非安全</li>
</ul>
<h2 id="系统运行级别"><a href="#系统运行级别" class="headerlink" title="系统运行级别"></a>系统运行级别</h2><blockquote>
<p>查看系统运行级别<br>cat /etc/inittab 默认级别<br>runlevel</p>
</blockquote>
<ul>
<li>0 关机</li>
<li>1 单用户</li>
<li>2 不完全多用户，不包含NFS服务</li>
<li>3 完全多用户</li>
<li>4 未分配</li>
<li>5 图形界面</li>
<li>6 重启</li>
</ul>
<h1 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h1><h2 id="挂载命令"><a href="#挂载命令" class="headerlink" title="挂载命令"></a>挂载命令</h2><blockquote>
<p>用户登录查看和用户交互命令</p>
</blockquote>
<ul>
<li>mount 查询系统中已经挂载的设备</li>
<li>mount -a 依据配置文件/etc/fstab的内容，自动挂载</li>
</ul>
<h2 id="挂载命令格式"><a href="#挂载命令格式" class="headerlink" title="挂载命令格式"></a>挂载命令格式</h2><p><code>mount [-t 文件系统] [-o 特殊选项] 设备文件名 挂载点</code></p>
<ul>
<li>-t 文件系统：加入文件系统类型来指定挂载的类型，可以ext3、ext4、iso9660等文件系统</li>
<li>-0 特殊选项：可以指定挂载的额外选项</li>
<li>#!/bin/bash  最好必须写</li>
<li>默认是可执行 exec.  </li>
<li>mount -0 remount, noexec /home  重新挂载/boot分区， 并使用noexec权限</li>
<li>remount 重新挂载已经挂载的文件系统，一般用于指定修改特殊权限</li>
</ul>
<h3 id="挂载光盘"><a href="#挂载光盘" class="headerlink" title="挂载光盘"></a>挂载光盘</h3><ul>
<li>mkdir /mnt/cdrom/  建立挂载点</li>
<li>mount -t iso9660 /dev/cdrom /mnt/cdrom 挂载光盘</li>
<li>mount /dev/sr0 /mnt/cdrom</li>
<li>umount /mnt/cdrom 必须卸载</li>
</ul>
<h3 id="挂载U盘"><a href="#挂载U盘" class="headerlink" title="挂载U盘"></a>挂载U盘</h3><ul>
<li>fdisk -i 查看U盘设备文件</li>
<li>mount -t vfat /dev/sdb1 /mnt/usb/  </li>
<li><code>注意：Linux默认不支持NTFS文件系统</code></li>
</ul>
<h2 id="用户登录查看命令"><a href="#用户登录查看命令" class="headerlink" title="用户登录查看命令"></a>用户登录查看命令</h2><ul>
<li>w 用户名 命令输出如下<ul>
<li>USER: 登录的用户名</li>
<li>TTY:  登录终端</li>
<li>FROM： 从哪个IP地址登录</li>
<li>LOGIN@: 登录时间</li>
<li>IDLE： 用户闲置时间</li>
<li>JCPU: 指的是和该终端廉洁的所有进程占用的时间。这个时间里并不包括过去的后台作业时间，但却包括当前正在运行的后台作业所占用的时间</li>
<li>PCUP：是指当前进程所占用的时间</li>
<li>WHAT: 当前正在运行的命令</li>
</ul>
</li>
<li>who 用户名</li>
<li>last 默认是读取 /var/log/wtmp文件数据，输出如下<ul>
<li>用户名</li>
<li>登录终端</li>
<li>登录IP</li>
<li>登录时间</li>
<li>退出时间（在线时间）</li>
</ul>
</li>
<li>lastlog 默认是读取/var/log/lastlog文件内容<ul>
<li>用户名</li>
<li>登录终端</li>
<li>登录ip</li>
<li>最后一次登录时间</li>
</ul>
</li>
</ul>
<h1 id="Shell部分"><a href="#Shell部分" class="headerlink" title="Shell部分"></a>Shell部分</h1><h2 id="Shell概况"><a href="#Shell概况" class="headerlink" title="Shell概况"></a>Shell概况</h2><ul>
<li>命令行解释器，计算机可不认识命令，只认识0101. 为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用Shell来启东、挂起、挺直甚至是编写一个程序</li>
<li>SHell还是一个功能相当强大的编译语言，易变写，易调试，灵活性较强。Shell是解释执行的脚本语言，在Sjell中可以直接调用Linux系统命令</li>
</ul>
<h2 id="Shell的分类"><a href="#Shell的分类" class="headerlink" title="Shell的分类"></a>Shell的分类</h2><ul>
<li>Bourne Shell: 从1979起Unix就开始使用Bourne Shell， 主文件名为sh。</li>
<li>C Shell: 主要在BSD版的Unix系统中使用，其语言和C语言像相似而得名</li>
<li>Shell的两种主要语法类型有Bourne和C，这两种语法彼此不兼容。Bourne家族主要有sh、ksh、Bash、psh、zsh； C家族主要包括csh、tcsh</li>
</ul>
<h2 id="脚本执行方式"><a href="#脚本执行方式" class="headerlink" title="脚本执行方式"></a>脚本执行方式</h2><ul>
<li>echo </li>
<li>vi hello.sh  (#!/bin/bash) 可以调用系统命令</li>
<li>赋予执行权限，直接运行<ul>
<li>chmod 755 hello.sh</li>
<li>./hello.sh</li>
</ul>
</li>
<li>通过Bash调用执行脚本<ul>
<li>bash hello.sh</li>
</ul>
</li>
</ul>
<h2 id="别名与快捷键"><a href="#别名与快捷键" class="headerlink" title="别名与快捷键"></a>别名与快捷键</h2><ul>
<li>alias cp = ‘cp -i’,  mv = ‘mv -i’,  rm = ‘rm -i’等等，提示，是否xxx？</li>
<li>unalias 删除别名</li>
<li>vi ~/.bashrc 写入环境变量配置文件</li>
<li>source ~/.bashrc  可以让配置重新生效</li>
</ul>
<h3 id="命令生效顺序"><a href="#命令生效顺序" class="headerlink" title="命令生效顺序"></a>命令生效顺序</h3><ol>
<li>用绝对路径或相对路径执行的命令</li>
<li>执行别名</li>
<li>执行Bash的内部命令</li>
<li>执行按照$PATH环境变量定义的目录查找顺序找到的第一个命令</li>
</ol>
<h3 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h3><ul>
<li>ctrl+c 强制终止当前命令</li>
<li>ctrl+l 清屏</li>
<li>ctrl+a 光标移动到命令行首</li>
<li>ctrl+e 光标移动到命令行尾</li>
<li>ctrl+u 从光标所在位置删除到行首</li>
<li>ctrl+z 把命令放入后台</li>
<li>ctrl+r 在历史命令中搜索</li>
</ul>
<h2 id="历史命令"><a href="#历史命令" class="headerlink" title="历史命令"></a>历史命令</h2><ul>
<li>history [选项] [历史命令保存文件]</li>
<li>-c 清空历史命令</li>
<li>-w 把缓存中的历史命令写入历史命令保存文件 ~/.bash_history</li>
<li>vim /etc/profile</li>
<li>上下剪头调用以前的历史命令</li>
<li>!n 重复执行第n条历史命令</li>
<li>!! 重复执行上一条命令</li>
<li>！字符串   重复执行最后一条以该字符串开头的命令</li>
</ul>
<h2 id="Bash命令补全"><a href="#Bash命令补全" class="headerlink" title="Bash命令补全"></a>Bash命令补全</h2><ul>
<li>tab键</li>
</ul>
<h2 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h2><p>把命令输出保存到文件， &gt; 代表覆盖的形式写入， &gt;&gt;代表追加的方式写入</p>
<ul>
<li>‘&gt;’覆盖，&gt;&gt; 追加</li>
<li>命令 &gt; 文件 2&gt;&amp;1    </li>
<li>命令 &gt;&gt; 文件 2&gt;&amp;1  </li>
<li>命令 &amp;&gt; 文件</li>
<li>命令 &amp;&gt;&gt; 文件</li>
<li>命令&gt;&gt;文件1  2&gt;&gt;文件2  <code>把正确的输出追加到文件1，把错误的输出追加到文件2中</code></li>
</ul>
<ul>
<li><code>ls &amp;&gt;/dev/null</code> 相当于既不显示到屏幕上，也不保存</li>
</ul>
<h2 id="输入重定向"><a href="#输入重定向" class="headerlink" title="输入重定向"></a>输入重定向</h2><blockquote>
<p>wc [选项] [文件名]</p>
</blockquote>
<ul>
<li>-c 统计字节数</li>
<li>-w 统计单词数</li>
<li>-l 统计行数</li>
</ul>
<h2 id="管道符"><a href="#管道符" class="headerlink" title="管道符"></a>管道符</h2><h3 id="多命令顺序执行"><a href="#多命令顺序执行" class="headerlink" title="多命令顺序执行"></a>多命令顺序执行</h3><ul>
<li>; 命令1：命令2  多个命令顺序执行，命令之间没有任何联系</li>
<li>&amp;&amp; cmd1 &amp;&amp; cmd2 只有当cmd1正确执行 命令cmd2才会执行</li>
<li>|| cmd1 || cmd2 当命令cmd1不正确的时候，命令2才会执行，正确则不执行</li>
</ul>
<h3 id="管道符-1"><a href="#管道符-1" class="headerlink" title="管道符"></a>管道符</h3><p><code>命令1 | 命令2</code>，命令1的正确输出作为命令2的操作对象</p>
<ul>
<li>ll -a /etc/ | more </li>
<li>netstat -an | grep xxx</li>
</ul>
<h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><ul>
<li>? 匹配<code>一个</code>任意字符</li>
<li>* 匹配0个或<code>任意多个</code>任意字符，也就是可以匹配任何内容</li>
<li>[] 匹配中括号中<code>任意一个</code>字符，例如：[abc]代表一定匹配一个字符串，或者是a,或者b,或者c。</li>
<li>[-] 匹配中括号中<code>任意一个</code>字符， -代表一个<code>范围</code>。例如[a-z]代表匹配一个小写字母</li>
<li>[^] 逻辑非，代表匹配<code>不是</code>中括号内的<code>一个字符</code>。例如：[^0-9]代表匹配不是一个数字的字符</li>
</ul>
<h2 id="Bash中其他特殊字符"><a href="#Bash中其他特殊字符" class="headerlink" title="Bash中其他特殊字符"></a>Bash中其他特殊字符</h2><table>
<thead>
<tr>
<th align="center"><code>符号</code></th>
<th align="center"><code>作用</code></th>
</tr>
</thead>
<tbody><tr>
<td align="center">‘’</td>
<td align="center">单引号。在单引号中<code>所有的特殊符号</code>，如”$”和”`“(反引号)都 <code>没有特殊含义</code>。</td>
</tr>
<tr>
<td align="center">“”</td>
<td align="center">双引号。在双引号中特殊字符都没有特殊含义，但是”$”、”`”、和”&quot;是例外，拥有”调用变量的值”、”引用命令”、”转义符”的特殊含义。</td>
</tr>
<tr>
<td align="center">``</td>
<td align="center">反引号。反引号括起来的内容是系统命令，在Bash中会先执行它。和$()作用一样，补货推荐使用$()，因为反引号非常容易看错</td>
</tr>
<tr>
<td align="center">$()</td>
<td align="center">和反引号作用一样，用来引用系统命令</td>
</tr>
<tr>
<td align="center">#</td>
<td align="center">在Shell脚本中，#开头的行代表注释。</td>
</tr>
<tr>
<td align="center">$</td>
<td align="center">用于调用变量的值，如需要调用变量name的值得时候，需要用$name的方式得到变量的值</td>
</tr>
<tr>
<td align="center">\</td>
<td align="center">转义符，跟在\之后的特殊字符将失去特殊含义，变为普通字符。如$ 将输出”$”符号</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangkejie.com/iOS/algorithm/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王科杰">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/iOS/algorithm/index.html" class="post-title-link" itemprop="url">iOS 算法收集</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-10 12:24:27" itemprop="dateCreated datePublished" datetime="2015-07-10T12:24:27+08:00">2015-07-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/iOS%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">iOS算法</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/iOS/algorithm/index.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/iOS/algorithm/index.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="回溯算法-问题"><a href="#回溯算法-问题" class="headerlink" title="回溯算法 问题"></a>回溯算法 问题</h2><table>
<thead>
<tr>
<th>类型</th>
<th>题目链接</th>
</tr>
</thead>
<tbody><tr>
<td>子集、组合</td>
<td>子集、子集 II、组合、组合总和、组合总和 II</td>
</tr>
<tr>
<td>全排列</td>
<td>全排列、全排列 II、字符串的全排列、字母大小写全排列</td>
</tr>
<tr>
<td>搜索</td>
<td>解数独、单词搜索、N皇后、分割回文串、二进制手表</td>
</tr>
</tbody></table>
<p>参考力扣解法<br><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvc3Vic2V0cy9zb2x1dGlvbi9jLXpvbmctamllLWxpYW8taHVpLXN1LXdlbi10aS1sZWkteGluZy1kYWktbmktZ2FvLS8=">C++<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvc3Vic2V0cy9zb2x1dGlvbi9lci1qaW4temhpLXdlaS16aHUtZ2UtbWVpLWp1LWRmc3Nhbi1jaG9uZy1zaS1sdS05Yy8=">java<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><p>①递归树<br>②找结束条件<br>③找准选择列表<br>④判断是否需要剪枝<br>⑤做出选择<br>⑥撤销选择</p>
<blockquote>
<p>总结：可以发现“排列”类型问题和“子集、组合”问题不同在于：“排列”问题使用used数组来标识选择列表，而“子集、组合”问题则使用start参数</p>
</blockquote>
<h2 id="1、不用中间变量-用两种方法交换A和B的值"><a href="#1、不用中间变量-用两种方法交换A和B的值" class="headerlink" title="1、不用中间变量,用两种方法交换A和B的值"></a><strong>1、不用中间变量,用两种方法交换A和B的值</strong></h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.中间变量</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">   <span class="type">int</span> temp = a;</span><br><span class="line">   a = b;</span><br><span class="line">   b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.加法</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">   a = a + b;</span><br><span class="line">   b = a - b;</span><br><span class="line">   a = a - b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.异或（相同为0，不同为1. 可以理解为不进位加法）</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">   a = a ^ b;</span><br><span class="line">   b = a ^ b;</span><br><span class="line">   a = a ^ b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、求最大公约数"><a href="#2、求最大公约数" class="headerlink" title="2、求最大公约数"></a><strong>2、求最大公约数</strong></h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 1.直接遍历法 */</span></span><br><span class="line"><span class="built_in">int</span> max<span class="constructor">CommonDivisor(<span class="params">int</span> <span class="params">a</span>, <span class="params">int</span> <span class="params">b</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">int</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt;=b; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a % i<span class="operator"> == </span><span class="number">0</span><span class="operator"> &amp;&amp; </span>b % i<span class="operator"> == </span><span class="number">0</span>) &#123;</span><br><span class="line">            max = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return max;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/** 2.辗转相除法 */</span></span><br><span class="line"><span class="built_in">int</span> max<span class="constructor">CommonDivisor(<span class="params">int</span> <span class="params">a</span>, <span class="params">int</span> <span class="params">b</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">int</span> r;</span><br><span class="line">    <span class="keyword">while</span>(a % b &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        r = a % b;</span><br><span class="line">        a = b;</span><br><span class="line">        b = r;</span><br><span class="line">    &#125;</span><br><span class="line">    return b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 扩展：最小公倍数 = (a * b)/最大公约数</span></span><br></pre></td></tr></table></figure>

<h2 id="3、模拟栈操作"><a href="#3、模拟栈操作" class="headerlink" title="3、模拟栈操作"></a><strong>3、模拟栈操作</strong></h2><ul>
<li>栈是一种数据结构，特点：先进后出 -</li>
<li>练习：使用全局变量模拟栈的操作</li>
</ul>
<p><strong>#include &lt;stdio.h&gt;<br>#include &lt;stdbool.h&gt;<br>#include &lt;assert.h&gt;</strong></p>
<p>//保护全局变量：在全局变量前加static后，这个全局变量就只能在本文件中使用<br>static int data[1024];//栈最多能保存1024个数据<br>static int count = 0;//目前已经放了多少个数(相当于栈顶位置)</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数据入栈 push</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push</span>(<span class="params"><span class="built_in">int</span> x</span>)</span>&#123;</span><br><span class="line">    assert(!full());<span class="comment">//防止数组越界</span></span><br><span class="line">    data[count++] = x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//数据出栈 pop</span></span><br><span class="line"><span class="function"><span class="built_in">int</span> <span class="title">pop</span>()</span>&#123;</span><br><span class="line">    assert(!empty());</span><br><span class="line">    <span class="keyword">return</span> data[--count];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//查看栈顶元素 top</span></span><br><span class="line"><span class="function"><span class="built_in">int</span> <span class="title">top</span>()</span>&#123;</span><br><span class="line">    assert(!empty());</span><br><span class="line">    <span class="keyword">return</span> data[count<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询栈满 full</span></span><br><span class="line"><span class="function"><span class="built_in">bool</span> <span class="title">full</span>()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(count &gt;= <span class="number">1024</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询栈空 empty</span></span><br><span class="line"><span class="function"><span class="built_in">bool</span> <span class="title">empty</span>()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(count &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">int</span> <span class="title">main</span>()</span>&#123;</span><br><span class="line">    <span class="comment">//入栈</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">        push(i);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//出栈</span></span><br><span class="line">    <span class="keyword">while</span>(!empty())&#123;</span><br><span class="line">        printf(<span class="string">&quot;%d &quot;</span>, top()); <span class="comment">//栈顶元素</span></span><br><span class="line">        pop(); <span class="comment">//出栈</span></span><br><span class="line">    &#125;</span><br><span class="line">    printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、排序算法"><a href="#4、排序算法" class="headerlink" title="4、排序算法"></a><strong>4、排序算法</strong></h2><p>选择排序、冒泡排序、插入排序三种排序算法可以总结为如下：<br>都将数组分为已排序部分和未排序部分。</p>
<p>1.选择排序将已排序部分定义在左端，然后选择未排序部分的最小元素和未排序部分的第一个元素交换。</p>
<p>2.冒泡排序将已排序部分定义在右端，在遍历未排序部分的过程执行交换，将最大元素交换到最右端。</p>
<p>3.插入排序将已排序部分定义在左端，将未排序部分元的第一个元素插入到已排序部分合适的位置。</p>
<p><strong>4.1、选择排序</strong></p>
<ul>
<li>【选择排序】：最值出现在起始端</li>
<li>第1趟：在n个数中找到最小(大)数与第一个数交换位置</li>
<li>第2趟：在剩下n-1个数中找到最小(大)数与第二个数交换位置</li>
<li>重复这样的操作…依次与第三个、第四个…数交换位置</li>
<li>第n-1趟，最终可实现数据的升序（降序）排列。</li>
</ul>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> selectSort(<span class="type">int</span> *arr, <span class="type">int</span> <span class="built_in">length</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">length</span> - <span class="number">1</span>; i++) &#123; <span class="comment">//趟数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; <span class="built_in">length</span>; j++) &#123; <span class="comment">//比较次数</span></span><br><span class="line">            <span class="keyword">if</span> (arr[i] &gt; arr[j]) &#123;</span><br><span class="line">                <span class="type">int</span> temp = arr[i];</span><br><span class="line">                arr[i] = arr[j];</span><br><span class="line">                arr[j] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4.2、冒泡排序</strong></p>
<ul>
<li>【冒泡排序】：相邻元素两两比较，比较完一趟，最值出现在末尾</li>
<li>第1趟：依次比较相邻的两个数，不断交换（小数放前，大数放后）逐个推进，最值最后出现在第n个元素位置</li>
<li>第2趟：依次比较相邻的两个数，不断交换（小数放前，大数放后）逐个推进，最值最后出现在第n-1个元素位置</li>
<li>……   ……</li>
<li>第n-1趟：依次比较相邻的两个数，不断交换（小数放前，大数放后）逐个推进，最值最后出现在第2个元素位置</li>
</ul>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> bublleSort(<span class="type">int</span> *arr, <span class="type">int</span> <span class="built_in">length</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">length</span> - <span class="number">1</span>; i++) &#123; <span class="comment">//趟数</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">length</span> - i - <span class="number">1</span>; j++) &#123; <span class="comment">//比较次数</span></span><br><span class="line">            <span class="keyword">if</span>(arr[j] &gt; arr[j+<span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="type">int</span> temp = arr[j];</span><br><span class="line">                arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">                arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5、折半查找（二分查找）"><a href="#5、折半查找（二分查找）" class="headerlink" title="#### 5、折半查找（二分查找）"></a>#### 5、折半查找（二分查找）</h2><p>折半查找：优化查找时间（不用遍历全部数据）<br>折半查找的原理：</p>
<ul>
<li>1&gt; 数组必须是有序的</li>
<li>2&gt; 必须已知min和max（知道范围）</li>
<li>3&gt; 动态计算mid的值，取出mid对应的值进行比较</li>
<li>4&gt; 如果mid对应的值大于要查找的值，那么max要变小为mid-1</li>
<li>5&gt; 如果mid对应的值小于要查找的值，那么min要变大为mid+1</li>
</ul>
<p>// 已知一个有序数组, 和一个key, 要求从数组中找到key对应的索引位置</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">int findKey(int *arr, int <span class="built_in">length</span>, int key) &#123;</span><br><span class="line">    int <span class="built_in">min</span> = <span class="number">0</span>, <span class="built_in">max</span> = <span class="built_in">length</span> - <span class="number">1</span>, <span class="built_in">mid</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">min</span> &lt;= <span class="built_in">max</span>) &#123;</span><br><span class="line">        <span class="built_in">mid</span> = (<span class="built_in">min</span> + <span class="built_in">max</span>) / <span class="number">2</span>; <span class="comment">//计算中间值</span></span><br><span class="line">        <span class="keyword">if</span> (key &gt; arr[<span class="built_in">mid</span>]) &#123;</span><br><span class="line">            <span class="built_in">min</span> = <span class="built_in">mid</span> + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &lt; arr[<span class="built_in">mid</span>]) &#123;</span><br><span class="line">            <span class="built_in">max</span> = <span class="built_in">mid</span> - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">mid</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6、集合结构-线性结构-树形结构-图形结构"><a href="#6、集合结构-线性结构-树形结构-图形结构" class="headerlink" title="6、集合结构 线性结构 树形结构 图形结构"></a>6、集合结构 线性结构 树形结构 图形结构</h2><ul>
<li>1.1、集合结构 说白了就是一个集合，就是一个圆圈中有很多个元素，元素与元素之间没有任何关系  这个很简单</li>
<li>1.2、线性结构 说白了就是一个条线上站着很多个人。 这条线不一定是直的。也可以是弯的。也可以是值的 相当于一条线被分成了好几段的样子 （发挥你的想象力）。 线性结构是一对一的关系</li>
<li>1.3、树形结构 说白了  做开发的肯定或多或少的知道xml 解析  树形结构跟他非常类似。也可以想象成一个金字塔。树形结构是一对多的关系</li>
<li>1.4、图形结构 这个就比较复杂了。他呢 无穷。无边  无向（没有方向）图形机构 你可以理解为多对多 类似于我们人的交集关系</li>
</ul>
<h2 id="7、数据结构的存储"><a href="#7、数据结构的存储" class="headerlink" title="7、数据结构的存储"></a>7、数据结构的存储</h2><p>数据结构的存储一般常用的有两种   顺序存储结构 和 链式存储结构</p>
<ul>
<li>2.1  顺序存储结构</li>
</ul>
<p>发挥想象力啊。 举个列子。数组。1-2-3-4-5-6-7-8-9-10。这个就是一个顺序存储结构 ，存储是按顺序的  举例说明啊。 栈。做开发的都熟悉。栈是先进后出 ，后进先出的形式 对不对 ？！他的你可以这样理解</p>
<p>hello world 在栈里面从栈底到栈顶的逻辑依次为 h-e-l-l-o-w-o-r-l-d 这就是顺序存储 再比如 队列 ，队列是先进先出的对吧，从头到尾 h-e-l-l-o-w-o-r-l-d 就是这样排对的</p>
<ul>
<li>2.2 链式存储结构</li>
</ul>
<p>再次发挥想象力 这个稍微复杂一点 这个图片我一直弄好 ，回头找美工问问，再贴上  例如 还是一个数组</p>
<p>1-2-3-4-5-6-7-8-9-10  链式存储就不一样了 1(地址)-2(地址)-7(地址)-4(地址)-5(地址)-9(地址)-8(地址)-3(地址)-6(地址)-10(地址)。每个数字后面跟着一个地址 而且存储形式不再是顺序 ，也就说顺序乱了，1（地址） 1后面跟着的这个地址指向的是2，2后面的地址指向的是3，3后面的地址指向是谁你应该清楚了吧。他执行的时候是 1(地址)-2(地址)-3(地址)-4(地址)-5(地址)-6(地址)-7(地址)-8(地址)-9(地址)-10(地址)，但是存储的时候就是完全随机的。明白了？！</p>
<h2 id="8、单向链表-双向链表-循环链表"><a href="#8、单向链表-双向链表-循环链表" class="headerlink" title="8、单向链表\双向链表\循环链表"></a>8、单向链表\双向链表\循环链表</h2><p>还是举例子。理解最重要。不要去死记硬背 哪些什么。定义啊。逻辑啊。理解才是最重要滴</p>
<ul>
<li>3.1 单向链表</li>
</ul>
<p>A-&gt;B-&gt;C-&gt;D-&gt;E-&gt;F-&gt;G-&gt;H. 这就是单向链表 H 是头 A 是尾 像一个只有一个头的火车一样 只能一个头拉着跑<br><img src="https://upload-images.jianshu.io/upload_images/13252132-681296a63ca929e4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<ul>
<li>3.2 双向链表</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/13252132-b3d7480416c4f332.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<blockquote>
<p>数组和链表区别：<br>数组：数组元素在内存上连续存放，可以通过下标查找元素；插入、删除需要移动大量元素，比较适用于元素很少变化的情况<br>链表：链表中的元素在内存中不是顺序存储的，查找慢，插入、删除只需要对元素指针重新赋值，效率高</p>
</blockquote>
<ul>
<li>3.3 循环链表</li>
</ul>
<p>循环链表是与单向链表一样，是一种链式的存储结构，所不同的是，循环链表的最后一个结点的指针是指向该循环链表的第一个结点或者表头结点，从而构成一个环形的链。发挥想象力  A-&gt;B-&gt;C-&gt;D-&gt;E-&gt;F-&gt;G-&gt;H-&gt;A. 绕成一个圈。就像蛇吃自己的这就是循环  不需要去死记硬背哪些理论知识。</p>
<h2 id="9、二叉树／平衡二叉树"><a href="#9、二叉树／平衡二叉树" class="headerlink" title="9、二叉树／平衡二叉树"></a>9、二叉树／平衡二叉树</h2><ul>
<li>4.1 什么是二叉树</li>
</ul>
<p>树形结构下,两个节点以内 都称之为二叉树 不存在大于2 的节点 分为左子树 右子树 有顺序 不能颠倒 ，懵逼了吧，你肯定会想这是什么玩意，什么左子树右子树 ，都什么跟什么鬼？  现在我以普通话再讲一遍，你把二叉树看成一个人 ，人的头呢就是树的根 ，左子树就是左手，右子树就是右手，左右手可以都没有（残疾嘛，声明一下，绝非歧视残疾朋友，勿怪，勿怪就是举个例子，i am very sorry）  , 左右手呢可以有一个，就是不能颠倒。这样讲应该明白了吧</p>
<p><strong>二叉树有五种表现形式</strong></p>
<p>1.空的树（没有节点）可以理解为什么都没 像空气一样<br>2.只有根节点。 （理解一个人只有一个头 其他的什么都没，说的有点恐怖）<br>3.只有左子树 （一个头 一个左手 感觉越来越写不下去了）<br>4.只有右子树<br>5.左右子树都有</p>
<p>二叉树可以转换成森林 树也可以转换成二叉树。这里就不介绍了 你做项目绝对用不到<br>数据结构大致介绍这么多吧。理解为主, 别死记，死记没什么用</p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangkejie.com/iOS/animation/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王科杰">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/iOS/animation/index.html" class="post-title-link" itemprop="url">iOS动画</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-10 12:24:27" itemprop="dateCreated datePublished" datetime="2015-07-10T12:24:27+08:00">2015-07-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/iOS%E5%8A%A8%E7%94%BB/" itemprop="url" rel="index"><span itemprop="name">iOS动画</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/iOS/animation/index.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/iOS/animation/index.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><p><code>AirBnb</code> 的 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FpcmJuYi9sb3R0aWUtaW9z">Lottie<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="Layar的认识"><a href="#Layar的认识" class="headerlink" title="Layar的认识"></a>Layar的认识</h2><p><code>layer</code> 层是涂层绘制、渲染、以及动画的完成者，它无法直接的处理触摸事件（也可以捕捉事件）<br><code>layer</code> 包含的方面非常多，常见的属性有 <code>Frame</code>、<code>Bounds</code>、<code>Position</code>、<code>AnchorPoint</code>、<code>Contents</code> 等等。<br>想详细了解 <code>CALayer</code> 以及动画的 ，可以看看这本书 - <span class="exturl" data-url="aHR0cHM6Ly9sZWdhY3kuZ2l0Ym9vay5jb20vYm9vay96c2lzbWUvaW9zLS9kZXRhaWxz">Core-Animation<i class="fa fa-external-link-alt"></i></span></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangkejie.com/iOS/block/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王科杰">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/iOS/block/index.html" class="post-title-link" itemprop="url">Block相关知识点</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-10 12:24:27" itemprop="dateCreated datePublished" datetime="2015-07-10T12:24:27+08:00">2015-07-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/OC%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">OC语言</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/iOS/block/index.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/iOS/block/index.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Block的几种形式"><a href="#Block的几种形式" class="headerlink" title="Block的几种形式"></a>Block的几种形式</h2><p>   分为全局Block(<code>_NSConcreteGlobalBlock</code>)、栈Block(<code>_NSConcreteStackBlock</code>)、堆Block<br>(<code>_NSConcreteMallocBlock</code>)三种形式<br>   其中栈Block存储在栈(stack)区，堆Block存储在堆(heap)区，全局Block存储在已初始化数据(.data)区</p>
<p><strong>1、不使用外部变量的block是全局block</strong></p>
<p>比如：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,[^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;globalBlock&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">class</span>]);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">__NSGlobalBlock__</span></span><br></pre></td></tr></table></figure>

<p><strong>2、使用外部变量并且未进行copy操作的block是栈block</strong></p>
<p>比如:</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSInteger</span> num = <span class="number">10</span>;</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,[^&#123;</span><br><span class="line">      <span class="built_in">NSLog</span>(<span class="string">@&quot;stackBlock:%zd&quot;</span>,num);</span><br><span class="line">  &#125; <span class="keyword">class</span>]);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">__NSStackBlock__</span></span><br></pre></td></tr></table></figure>

<p>日常开发常用于这种情况:</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span> testWithBlock:^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,<span class="keyword">self</span>);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)testWithBlock:(dispatch_block_t)block &#123;</span><br><span class="line">    block();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,[block <span class="keyword">class</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3、对栈block进行copy操作，就是堆block，而对全局block进行copy，仍是全局block</strong></p>
<ul>
<li>比如堆1中的全局进行copy操作，即赋值：</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> (^globalBlock)(<span class="type">void</span>) = ^&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;globalBlock&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,[globalBlock <span class="keyword">class</span>]);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">__NSGlobalBlock__</span></span><br></pre></td></tr></table></figure>

<p>仍是全局block</p>
<ul>
<li>而对2中的栈block进行赋值操作：</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSInteger</span> num = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> (^mallocBlock)(<span class="type">void</span>) = ^&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;stackBlock:%zd&quot;</span>,num);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,[mallocBlock <span class="keyword">class</span>]);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">__NSMallocBlock__</span></span><br></pre></td></tr></table></figure>

<p>对栈blockcopy之后，并不代表着栈block就消失了，左边的mallock是堆block，右边被copy的仍是栈block<br>比如:</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span> testWithBlock:^&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,<span class="keyword">self</span>);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)testWithBlock:(dispatch_block_t)block</span><br><span class="line">&#123;</span><br><span class="line">    block();</span><br><span class="line">    </span><br><span class="line">    dispatch_block_t tempBlock = block;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@,%@&quot;</span>,[block <span class="keyword">class</span>],[tempBlock <span class="keyword">class</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">__NSStackBlock__</span>,<span class="emphasis">__NSMallocBlock__</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>即如果对栈Block进行copy，将会copy到堆区，对堆Block进行copy，将会增加引用计数，对全局Block进行copy，因为是已经初始化的，所以什么也不做。</strong></li>
</ul>
<p>另外，__block变量在copy时，由于__forwarding的存在，栈上的__forwarding指针会指向堆上的__forwarding变量，而堆上的__forwarding指针指向其自身，所以，如果对__block的修改，实际上是在修改堆上的__block变量。</p>
<p><strong>即__forwarding指针存在的意义就是，无论在任何内存位置，都可以顺利地访问同一个__block变量</strong>。</p>
<ul>
<li>另外由于block捕获的__block修饰的变量会去持有变量，那么如果用__block修饰self，且self持有block，并且block内部使用到__block修饰的self时，就会造成多循环引用，即self持有block，block 持有__block变量，而__block变量持有self，造成内存泄漏。<br>比如:</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">__block <span class="keyword">typeof</span>(<span class="keyword">self</span>) blockSelf = <span class="keyword">self</span>;</span><br><span class="line">   </span><br><span class="line">   _testBlock = ^&#123;</span><br><span class="line">       </span><br><span class="line">       <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,blockSelf);</span><br><span class="line">   &#125;;</span><br><span class="line">   </span><br><span class="line">   _testBlock();</span><br></pre></td></tr></table></figure>

<p>如果要解决这种循环引用，可以主动断开__block变量对self的持有，即在block内部使用完blockSelf后，将其置为nil，但这种方式有个问题，如果block一直不被调用，那么循环引用将一直存在。<br>所以，我们最好还是用__weak来修饰self</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangkejie.com/iOS/memorymanagerment/memory.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王科杰">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/iOS/memorymanagerment/memory.html" class="post-title-link" itemprop="url">内存管理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-10 12:24:27" itemprop="dateCreated datePublished" datetime="2015-07-10T12:24:27+08:00">2015-07-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/iOS%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">iOS内存管理</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/iOS/memorymanagerment/memory.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/iOS/memorymanagerment/memory.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="autoReleasePool-什么时候释放"><a href="#autoReleasePool-什么时候释放" class="headerlink" title="autoReleasePool 什么时候释放?"></a><code>autoReleasePool</code> 什么时候释放?</h2><p><code>App</code>启动后，苹果在主线程 <code>RunLoop</code> 里注册了两个 <code>Observer</code>，其回调都是 <code>_wrapRunLoopWithAutoreleasePoolHandler()</code>。</p>
<p>第一个 <code>Observer</code> 监视的事件是 <code>Entry(即将进入Loop)</code>，其回调内会调用 <code>_objc_autoreleasePoolPush()</code> 创建自动释放池。其 <code>order</code> 是 <code>-2147483647</code>，优先级最高，保证创建释放池发生在其他所有回调之前。</p>
<p>第二个 <code>Observer</code> 监视了两个事件： <code>BeforeWaiting</code>(准备进入休眠) 时调用<code>_objc_autoreleasePoolPop()</code>  和 <code>_objc_autoreleasePoolPush()</code> 释放旧的池并创建新池；<code>Exit</code>(即将退出Loop) 时调用 <code>_objc_autoreleasePoolPop()</code> 来释放自动释放池。这个 <code>Observer</code> 的 <code>order</code> 是 <code>2147483647</code>，优先级最低，保证其释放池子发生在其他所有回调之后。</p>
<p>在主线程执行的代码，通常是写在诸如事件回调、<code>Timer</code>回调内的。这些回调会被 <code>RunLoop</code> 创建好的 <code>AutoreleasePool</code> 环绕着，所以不会出现内存泄漏，开发者也不必显示创建 <code>Pool</code> 了。</p>
<h2 id="在-Obj-C-中，如何检测内存泄漏？你知道哪些方式？"><a href="#在-Obj-C-中，如何检测内存泄漏？你知道哪些方式？" class="headerlink" title="在 Obj-C 中，如何检测内存泄漏？你知道哪些方式？"></a>在 <code>Obj-C</code> 中，如何检测内存泄漏？你知道哪些方式？</h2><p>目前我知道的方式有以下几种</p>
<ul>
<li>Memory Leaks</li>
<li>Alloctions</li>
<li>Analyse</li>
<li>Debug Memory Graph</li>
<li>MLeaksFinder</li>
</ul>
<p>泄露的内存主要有以下两种：</p>
<ul>
<li><code>Laek Memory</code> 这种是忘记 <code>Release</code> 操作所泄露的内存。</li>
<li><code>Abandon Memory</code> 这种是循环引用，无法释放掉的内存。</li>
</ul>
<p>上面所说的五种方式，其实前四种都比较麻烦，需要不断地调试运行，第五种是腾讯阅读团队出品，效果好一些，感兴趣的可以看一下这两篇文章：</p>
<ul>
<li><span class="exturl" data-url="aHR0cDovL3dlcmVhZHRlYW0uZ2l0aHViLmlvLzIwMTYvMDIvMjIvTUxlYWtzRmluZGVyLw==">MLeaksFinder：精准 iOS 内存泄露检测工具<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3dlcmVhZHRlYW0uZ2l0aHViLmlvLzIwMTYvMDcvMjAvTUxlYWtzRmluZGVyMi8=">MLeaksFinder 新特性<i class="fa fa-external-link-alt"></i></span></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangkejie.com/iOS/objective-c/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王科杰">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/iOS/objective-c/index.html" class="post-title-link" itemprop="url">Objective-C 语言</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-10 12:24:27" itemprop="dateCreated datePublished" datetime="2015-07-10T12:24:27+08:00">2015-07-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Objetive-C/" itemprop="url" rel="index"><span itemprop="name">Objetive-C</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/iOS/objective-c/index.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/iOS/objective-c/index.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="事件响应"><a href="#事件响应" class="headerlink" title="事件响应"></a>事件响应</h2><p>个人语言简述如下</p>
<ul>
<li>事件(例如点击屏幕)产生后，系统会把事件传递给当前的application，然后是window依次传递给viewcontroller，最后是手指所接触的view，</li>
<li>这个过程会被阻断，比如 userInteractionEnabled = NO,再比如隐藏 hidden = YES.透明度&lt;0.01,再比如指定了<code>hitTest：withEvent：</code>方法等。</li>
<li>然后，开始处理事件，view(UIResponder)来响应，view不处理，则上一级接受到继续，一直到application,这个过程重要的方法如下</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> 上一个响应者可能是父控件</span><br><span class="line">- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event&#123; </span><br><span class="line"><span class="regexp">//</span> 默认会把事件传递给上一个响应者,上一个响应者是父控件,交给父控件处理</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>再比如自己处理完还想让父响应者也处理，就在这写一些东西</span><br><span class="line"><span class="regexp">//</span><span class="keyword">do</span> something here</span><br><span class="line"></span><br><span class="line">[super touchesBegan:touches withEvent:event]; </span><br><span class="line"><span class="regexp">//</span> 注意不是调用父控件的touches方法，而是调用父类的touches方法</span><br><span class="line"><span class="regexp">//</span> super是父类 superview是父控件 </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="属性关键字"><a href="#属性关键字" class="headerlink" title="属性关键字"></a>属性关键字</h2><p>1.读写权限：readonly,readwrite(默认)<br>2.原子性: atomic(默认)，nonatomic。atomic读写线程安全，但效率低，而且不是绝对的安全，比如如果修饰的是数组，那么对数组的读写是安全的，但如果是操作数组进行添加移除其中对象的还，就不保证安全了。<br>3.引用计数：</p>
<ul>
<li>retain/strong</li>
<li>assign：修饰基本数据类型，修饰对象类型时，不改变其引用计数，会产生悬垂指针，修饰的对象在被释放后，assign指针仍然指向原对象内存地址，如果使用assign指针继续访问原对象的话，就可能会导致内存泄漏或程序异常</li>
<li>weak：不改变被修饰对象的引用计数，所指对象在被释放后，weak指针会自动置为nil</li>
<li>copy：分为深拷贝和浅拷贝<br>浅拷贝：对内存地址的复制，让目标对象指针和原对象指向同一片内存空间会增加引用计数<br>深拷贝：对对象内容的复制，开辟新的内存空间</li>
</ul>
<p>可变对象的copy和mutableCopy都是深拷贝<br>不可变对象的copy是浅拷贝，mutableCopy是深拷贝<br>copy方法返回的都是不可变对象</p>
<ul>
<li>@property (nonatomic, copy) NSMutableArray * array;这样写有什么影响？<br>因为copy方法返回的都是不可变对象，所以array对象实际上是不可变的，如果对其进行可变操作如添加移除对象，则会造成程序crash</li>
</ul>
<h2 id="KVO-Key-value-observing"><a href="#KVO-Key-value-observing" class="headerlink" title="KVO (Key-value observing)"></a>KVO (Key-value observing)</h2><p>KVO是观察者模式的另一实现。<br>使用了isa混写(isa-swizzling)来实现KVO</p>
<p>使用setter方法改变值KVO会生效，使用setValue:forKey即KVC改变值KVO也会生效，因为KVC会去调用setter方法</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (void)setValue:(id)value</span><br><span class="line">&#123;</span><br><span class="line">    <span class="selector-attr">[self willChangeValueForKey:@<span class="string">&quot;key&quot;</span>]</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-attr">[super setValue:value]</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-attr">[self didChangeValueForKey:@<span class="string">&quot;key&quot;</span>]</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>那么通过直接赋值成员变量会触发KVO吗？<br>不会，因为不会调用setter方法，需要加上<br>willChangeValueForKey和didChangeValueForKey方法来手动触发才行</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangkejie.com/iOS/performance/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王科杰">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/iOS/performance/index.html" class="post-title-link" itemprop="url">iOS性能优化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-10 12:24:27" itemprop="dateCreated datePublished" datetime="2015-07-10T12:24:27+08:00">2015-07-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/iOS%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">iOS性能优化</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/iOS/performance/index.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/iOS/performance/index.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="如何提升-tableview-的流畅度？"><a href="#如何提升-tableview-的流畅度？" class="headerlink" title="如何提升 tableview 的流畅度？"></a>如何提升 <code>tableview</code> 的流畅度？</h2><p>本质上是降低 CPU、GPU 的工作，从这两个大的方面去提升性能。</p>
<ul>
<li>CPU：对象的创建和销毁、对象属性的调整、布局计算、文本的计算和排版、图片的格式转换和解码、图像的绘制</li>
<li>GPU：纹理的渲染</li>
</ul>
<h3 id="卡顿优化在-CPU-层面"><a href="#卡顿优化在-CPU-层面" class="headerlink" title="卡顿优化在 CPU 层面"></a>卡顿优化在 CPU 层面</h3><ul>
<li>尽量用轻量级的对象，比如用不到事件处理的地方，可以考虑使用 CALayer 取代 UIView</li>
<li>不要频繁地调用 UIView 的相关属性，比如 frame、bounds、transform 等属性，尽量减少不必要的修改</li>
<li>尽量提前计算好布局，在有需要时一次性调整对应的属性，不要多次修改属性</li>
<li>Autolayout 会比直接设置 frame 消耗更多的 CPU 资源</li>
<li>图片的 size 最好刚好跟 UIImageView 的 size 保持一致</li>
<li>控制一下线程的最大并发数量</li>
<li>尽量把耗时的操作放到子线程<ul>
<li>文本处理（尺寸计算、绘制）</li>
<li>图片处理（解码、绘制）</li>
</ul>
</li>
</ul>
<h3 id="卡顿优化在-GPU层面"><a href="#卡顿优化在-GPU层面" class="headerlink" title="卡顿优化在 GPU层面"></a>卡顿优化在 GPU层面</h3><ul>
<li>尽量避免短时间内大量图片的显示，尽可能将多张图片合成一张进行显示</li>
<li>GPU能处理的最大纹理尺寸是 4096x4096，一旦超过这个尺寸，就会占用 CPU 资源进行处理，所以纹理尽量不要超过这个尺寸</li>
<li>尽量减少视图数量和层次</li>
<li>减少透明的视图（alpha&lt;1），不透明的就设置 opaque 为 YES</li>
<li>尽量避免出现离屏渲染</li>
</ul>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmliaXJlbWUuY29tLzIwMTUvMTEvMTIvc21vb3RoX3VzZXJfaW50ZXJmYWNlc19mb3JfaW9zLw==">iOS 保持界面流畅的技巧<i class="fa fa-external-link-alt"></i></span></p>
<h4 id="1-预排版，提前计算"><a href="#1-预排版，提前计算" class="headerlink" title="1.预排版，提前计算"></a>1.预排版，提前计算</h4><p>在接收到服务端返回的数据后，尽量将 <code>CoreText</code> 排版的结果、单个控件的高度、<code>cell</code> 整体的高度提前计算好，将其存储在模型的属性中。需要使用时，直接从模型中往外取，避免了计算的过程。</p>
<p>尽量少用 <code>UILabel</code>，可以使用 <code>CALayer</code> 。避免使用 <code>AutoLayout</code> 的自动布局技术，采取纯代码的方式 </p>
<blockquote>
<p>Autolayout 是苹果本身提倡的技术，在大部分情况下也能很好的提升开发效率，但是 Autolayout 对于复杂视图来说常常会产生严重的性能问题。随着视图数量的增长，Autolayout 带来的 CPU 消耗会呈指数级上升。具体数据可以看这个文章：<span class="exturl" data-url="aHR0cDovL3BpbGt5Lm1lLzM2LyVFMyU4MCU4Mg==">http://pilky.me/36/。<i class="fa fa-external-link-alt"></i></span> 如果你不想手动调整 frame 等属性，你可以用一些工具方法替代（比如常见的 left/right/top/bottom/width/height 快捷属性），或者使用 ComponentKit、<a href="./iOS/thirdpart/asdk.html">AsyncDisplayKit</a> 等框架。</p>
</blockquote>
<h4 id="2-预渲染，提前绘制"><a href="#2-预渲染，提前绘制" class="headerlink" title="2.预渲染，提前绘制"></a>2.预渲染，提前绘制</h4><p>例如圆形的图标可以提前在，在接收到网络返回数据时，在后台线程进行处理，直接存储在模型数据里，回到主线程后直接调用就可以了</p>
<p>避免使用 CALayer 的 Border、corner、shadow、mask 等技术，这些都会触发离屏渲染。</p>
<h4 id="3-异步绘制"><a href="#3-异步绘制" class="headerlink" title="3.异步绘制"></a>3.异步绘制</h4><h4 id="4-全局并发线程"><a href="#4-全局并发线程" class="headerlink" title="4.全局并发线程"></a>4.全局并发线程</h4><h4 id="5-高效的图片异步加载"><a href="#5-高效的图片异步加载" class="headerlink" title="5.高效的图片异步加载"></a>5.高效的图片异步加载</h4><h2 id="如何有效降低-APP-包的大小？"><a href="#如何有效降低-APP-包的大小？" class="headerlink" title="如何有效降低 APP 包的大小？"></a>如何有效降低 <code>APP</code> 包的大小？</h2><p>降低包大小需要从两方面着手</p>
<h3 id="可执行文件"><a href="#可执行文件" class="headerlink" title="可执行文件"></a>可执行文件</h3><ul>
<li><p>编译器优化</p>
<ul>
<li>Strip Linked Product、Make Strings Read-Only、Symbols Hidden by Default 设置为 YES</li>
<li>去掉异常支持，Enable C++ Exceptions、Enable Objective-C Exceptions 设置为 NO， Other C Flags 添加 -fno-exceptions   </li>
</ul>
</li>
<li><p>利用 AppCode 检测未使用的代码：菜单栏 -&gt; Code -&gt; Inspect Code</p>
</li>
<li><p>编写LLVM插件检测出重复代码、未被调用的代码</p>
</li>
</ul>
<h3 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h3><blockquote>
<p>资源包括 图片、音频、视频 等</p>
</blockquote>
<ul>
<li>优化的方式可以对资源进行无损的压缩</li>
<li>去除没有用到的资源： <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RpbnltaW5kL0xTVW51c2VkUmVzb3VyY2Vz">https://github.com/tinymind/LSUnusedResources<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="继续优化"><a href="#继续优化" class="headerlink" title="继续优化"></a>继续优化</h2><h3 id="1、重用和延迟加载-lazy-load-Views"><a href="#1、重用和延迟加载-lazy-load-Views" class="headerlink" title="1、重用和延迟加载(lazy load) Views"></a>1、重用和延迟加载(lazy load) Views</h3><ul>
<li>更多的view意味着更多的渲染，也就是更多的CPU和内存消耗，对于那种嵌套了很多view在UIScrollView里边的app更是如此。</li>
<li>这里我们用到的技巧就是模仿UITableView和UICollectionView的操作: 不要一次创建所有的subview，而是当需要时才创建，当它们完成了使命，把他们放进一个可重用的队列中。这样的话你就只需要在滚动发生时创建你的views，避免了不划算的内存分配。</li>
</ul>
<h3 id="2、Cache-Cache-还是Cache"><a href="#2、Cache-Cache-还是Cache" class="headerlink" title="2、Cache, Cache, 还是Cache!"></a>2、Cache, Cache, 还是Cache!</h3><ul>
<li>一个极好的原则就是，缓存所需要的，也就是那些不大可能改变但是需要经常读取的东西。</li>
<li>我们能缓存些什么呢？一些选项是，远端服务器的响应，图片，甚至计算结果，比如UITableView的行高。</li>
<li>NSCache和NSDictionary类似，不同的是系统回收内存的时候它会自动删掉它的内容。</li>
</ul>
<h3 id="3、权衡渲染方法-性能能还是要bundle保持合适的大小。"><a href="#3、权衡渲染方法-性能能还是要bundle保持合适的大小。" class="headerlink" title="3、权衡渲染方法.性能能还是要bundle保持合适的大小。"></a>3、权衡渲染方法.性能能还是要bundle保持合适的大小。</h3><h3 id="4、处理内存警告-移除对缓存，图片object和其他一些可以重创建的objects的strong-references"><a href="#4、处理内存警告-移除对缓存，图片object和其他一些可以重创建的objects的strong-references" class="headerlink" title="4、处理内存警告.移除对缓存，图片object和其他一些可以重创建的objects的strong references."></a>4、处理内存警告.移除对缓存，图片object和其他一些可以重创建的objects的strong references.</h3><h3 id="5、重用大开销对象"><a href="#5、重用大开销对象" class="headerlink" title="5、重用大开销对象"></a>5、重用大开销对象</h3><h3 id="6、一些objects的初始化很慢，比如NSDateFormatter和NSCalendar。然而，你又不可避免地需要使用它们，比如从JSON或者XML中解析数据。想要避免使用这个对象的瓶颈你就需要重用他们，可以通过添加属性到你的class里或者创建静态变量来实现。"><a href="#6、一些objects的初始化很慢，比如NSDateFormatter和NSCalendar。然而，你又不可避免地需要使用它们，比如从JSON或者XML中解析数据。想要避免使用这个对象的瓶颈你就需要重用他们，可以通过添加属性到你的class里或者创建静态变量来实现。" class="headerlink" title="6、一些objects的初始化很慢，比如NSDateFormatter和NSCalendar。然而，你又不可避免地需要使用它们，比如从JSON或者XML中解析数据。想要避免使用这个对象的瓶颈你就需要重用他们，可以通过添加属性到你的class里或者创建静态变量来实现。"></a>6、一些objects的初始化很慢，比如NSDateFormatter和NSCalendar。然而，你又不可避免地需要使用它们，比如从JSON或者XML中解析数据。想要避免使用这个对象的瓶颈你就需要重用他们，可以通过添加属性到你的class里或者创建静态变量来实现。</h3><h3 id="7、避免反复处理数据-在服务器端和客户端使用相同的数据结构很重要。"><a href="#7、避免反复处理数据-在服务器端和客户端使用相同的数据结构很重要。" class="headerlink" title="7、避免反复处理数据.在服务器端和客户端使用相同的数据结构很重要。"></a>7、避免反复处理数据.在服务器端和客户端使用相同的数据结构很重要。</h3><h3 id="8、选择正确的数据格式-解析JSON会比XML更快一些，JSON也通常更小更便于传输。从iOS5起有了官方内建的JSON-deserialization-就更加方便使用了。但是XML也有XML的好处，比如使用SAX-来解析XML就像解析本地文件一样，你不需像解析json一样等到整个文档下载完成才开始解析。当你处理很大的数据的时候就会极大地减低内存消耗和增加性能。"><a href="#8、选择正确的数据格式-解析JSON会比XML更快一些，JSON也通常更小更便于传输。从iOS5起有了官方内建的JSON-deserialization-就更加方便使用了。但是XML也有XML的好处，比如使用SAX-来解析XML就像解析本地文件一样，你不需像解析json一样等到整个文档下载完成才开始解析。当你处理很大的数据的时候就会极大地减低内存消耗和增加性能。" class="headerlink" title="8、选择正确的数据格式.解析JSON会比XML更快一些，JSON也通常更小更便于传输。从iOS5起有了官方内建的JSON deserialization 就更加方便使用了。但是XML也有XML的好处，比如使用SAX 来解析XML就像解析本地文件一样，你不需像解析json一样等到整个文档下载完成才开始解析。当你处理很大的数据的时候就会极大地减低内存消耗和增加性能。"></a>8、选择正确的数据格式.解析JSON会比XML更快一些，JSON也通常更小更便于传输。从iOS5起有了官方内建的JSON deserialization 就更加方便使用了。但是XML也有XML的好处，比如使用SAX 来解析XML就像解析本地文件一样，你不需像解析json一样等到整个文档下载完成才开始解析。当你处理很大的数据的时候就会极大地减低内存消耗和增加性能。</h3><h3 id="9、正确设定背景图片"><a href="#9、正确设定背景图片" class="headerlink" title="9、正确设定背景图片"></a>9、正确设定背景图片</h3><ul>
<li>全屏背景图，在view中添加一个UIImageView作为一个子View</li>
<li>只是某个小的view的背景图，你就需要用UIColor的colorWithPatternImage来做了，它会更快地渲染也不会花费很多内存：</li>
</ul>
<h3 id="10、减少使用Web特性。想要更高的性能你就要调整下你的HTML了。第一件要做的事就是尽可能移除不必要的javascript，避免使用过大的框架。能只用原生js就更好了。尽可能异步加载例如用户行为统计script这种不影响页面表达的javascript。注意你使用的图片，保证图片的符合你使用的大小。"><a href="#10、减少使用Web特性。想要更高的性能你就要调整下你的HTML了。第一件要做的事就是尽可能移除不必要的javascript，避免使用过大的框架。能只用原生js就更好了。尽可能异步加载例如用户行为统计script这种不影响页面表达的javascript。注意你使用的图片，保证图片的符合你使用的大小。" class="headerlink" title="10、减少使用Web特性。想要更高的性能你就要调整下你的HTML了。第一件要做的事就是尽可能移除不必要的javascript，避免使用过大的框架。能只用原生js就更好了。尽可能异步加载例如用户行为统计script这种不影响页面表达的javascript。注意你使用的图片，保证图片的符合你使用的大小。"></a>10、减少使用Web特性。想要更高的性能你就要调整下你的HTML了。第一件要做的事就是尽可能移除不必要的javascript，避免使用过大的框架。能只用原生js就更好了。尽可能异步加载例如用户行为统计script这种不影响页面表达的javascript。注意你使用的图片，保证图片的符合你使用的大小。</h3><h3 id="11、Shadow-Path-。CoreAnimation不得不先在后台得出你的图形并加好阴影然后才渲染，这开销是很大的。使用shadowPath的话就避免了这个问题。使用shadow-path的话iOS就不必每次都计算如何渲染，它使用一个预先计算好的路径。但问题是自己计算path的话可能在某些View中比较困难，且每当view的frame变化的时候你都需要去update-shadow-path"><a href="#11、Shadow-Path-。CoreAnimation不得不先在后台得出你的图形并加好阴影然后才渲染，这开销是很大的。使用shadowPath的话就避免了这个问题。使用shadow-path的话iOS就不必每次都计算如何渲染，它使用一个预先计算好的路径。但问题是自己计算path的话可能在某些View中比较困难，且每当view的frame变化的时候你都需要去update-shadow-path" class="headerlink" title="11、Shadow Path 。CoreAnimation不得不先在后台得出你的图形并加好阴影然后才渲染，这开销是很大的。使用shadowPath的话就避免了这个问题。使用shadow path的话iOS就不必每次都计算如何渲染，它使用一个预先计算好的路径。但问题是自己计算path的话可能在某些View中比较困难，且每当view的frame变化的时候你都需要去update shadow path."></a>11、Shadow Path 。CoreAnimation不得不先在后台得出你的图形并加好阴影然后才渲染，这开销是很大的。使用shadowPath的话就避免了这个问题。使用shadow path的话iOS就不必每次都计算如何渲染，它使用一个预先计算好的路径。但问题是自己计算path的话可能在某些View中比较困难，且每当view的frame变化的时候你都需要去update shadow path.</h3><h3 id="12、优化Table-View"><a href="#12、优化Table-View" class="headerlink" title="12、优化Table View"></a>12、优化Table View</h3><ul>
<li>正确使用reuseIdentifier来重用cells</li>
<li>尽量使所有的view opaque，包括cell自身</li>
<li>避免渐变，图片缩放，后台选人</li>
<li>缓存行高</li>
<li>如果cell内现实的内容来自web，使用异步加载，缓存请求结果</li>
<li>使用shadowPath来画阴影</li>
<li>减少subviews的数量</li>
<li>尽量不适用cellForRowAtIndexPath:，如果你需要用到它，只用-一次然后缓存结果</li>
<li>使用正确的数据结构来存储数据</li>
<li>使用rowHeight, sectionFooterHeight 和 sectionHeaderHeight来设定固定的高，不要请求delegate</li>
</ul>
<h3 id="13、选择正确的数据存储选项"><a href="#13、选择正确的数据存储选项" class="headerlink" title="13、选择正确的数据存储选项"></a>13、选择正确的数据存储选项</h3><ul>
<li>NSUserDefaults的问题是什么？虽然它很nice也很便捷，但是它只适用于小数据，比如一些简单的布尔型的设置选项，再大点你就要考虑其它方式了</li>
<li>XML这种结构化档案呢？总体来说，你需要读取整个文件到内存里去解析，这样是很不经济的。使用SAX又是一个很麻烦的事情。</li>
<li>NSCoding？不幸的是，它也需要读写文件，所以也有以上问题。</li>
<li>在这种应用场景下，使用SQLite 或者 Core Data比较好。使用这些技术你用特定的查询语句就能只加载你需要的对象。</li>
<li>在性能层面来讲，SQLite和Core Data是很相似的。他们的不同在于具体使用方法。</li>
<li>Core Data代表一个对象的graph model，但SQLite就是一个DBMS。</li>
<li>Apple在一般情况下建议使用Core Data，但是如果你有理由不使用它，那么就去使用更加底层的SQLite吧。</li>
<li>如果你使用SQLite，你可以用FMDB这个库来简化SQLite的操作，这样你就不用花很多经历了解SQLite的C API了。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jack Wang"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Jack Wang</p>
  <div class="site-description" itemprop="description">书山有路勤为径，学海无涯苦作舟！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">70</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">70</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">78</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL29yZ3Mvd2FuZ2tlamllL3JlcG9zaXRvcmllcw==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;orgs&#x2F;wangkejie&#x2F;repositories"><i class="github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOjcyNzg4MTk0NUBxcS5jb20=" title="E-Mail → mailto:727881945@qq.com"><i class="envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><span class="exturl" data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbg==">京ICP备16036665号-2 </span>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jack Wang</span>
</div>

        


  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1277804316&web_id=1277804316"></script>
  </div>






      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://wangkejie.com/page/7/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'S7tR3Qqx6JSg8P5ChLXjLWt8-gzGzoHsz',
      appKey     : 'hHRdJzqrf8zU1xQElb7km39u',
      placeholder: "上面也可以填入联系方式，感谢您宝贵的建议~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
